"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/skinview3d";
exports.ids = ["vendor-chunks/skinview3d"];
exports.modules = {

/***/ "(ssr)/./node_modules/skinview3d/libs/animation.js":
/*!***************************************************!*\
  !*** ./node_modules/skinview3d/libs/animation.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CrouchAnimation: () => (/* binding */ CrouchAnimation),\n/* harmony export */   FlyingAnimation: () => (/* binding */ FlyingAnimation),\n/* harmony export */   FunctionAnimation: () => (/* binding */ FunctionAnimation),\n/* harmony export */   HitAnimation: () => (/* binding */ HitAnimation),\n/* harmony export */   IdleAnimation: () => (/* binding */ IdleAnimation),\n/* harmony export */   PlayerAnimation: () => (/* binding */ PlayerAnimation),\n/* harmony export */   RunningAnimation: () => (/* binding */ RunningAnimation),\n/* harmony export */   WalkingAnimation: () => (/* binding */ WalkingAnimation),\n/* harmony export */   WaveAnimation: () => (/* binding */ WaveAnimation)\n/* harmony export */ });\n/* harmony import */ var _model_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./model.js */ \"(ssr)/./node_modules/skinview3d/libs/model.js\");\n\n/**\n * An animation which can be played on a {@link PlayerObject}.\n *\n * This is an abstract class. Subclasses of this class would implement\n * particular animations.\n */\nclass PlayerAnimation {\n    constructor() {\n        /**\n         * The speed of the animation.\n         *\n         * @defaultValue `1.0`\n         */\n        Object.defineProperty(this, \"speed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1.0\n        });\n        /**\n         * Whether the animation is paused.\n         *\n         * @defaultValue `false`\n         */\n        Object.defineProperty(this, \"paused\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        /**\n         * The current progress of the animation.\n         */\n        Object.defineProperty(this, \"progress\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"currentId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"progress0\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"animationObjects\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n    }\n    /**\n     * Plays the animation, and update the progress.\n     *\n     * The elapsed time `deltaTime` will be scaled by {@link speed}.\n     * If {@link paused} is `true`, this method will do nothing.\n     *\n     * @param player - the player object\n     * @param deltaTime - time elapsed since last call\n     */\n    update(player, deltaTime) {\n        if (this.paused) {\n            return;\n        }\n        const delta = deltaTime * this.speed;\n        this.animate(player, delta);\n        this.animationObjects.forEach((animation, id) => {\n            const progress0 = this.progress0.get(id);\n            animation(player, this.progress - progress0, id);\n        });\n        this.progress += delta;\n    }\n    /**\n     * Adds a new animation based on the original animation and returns its id.\n     *\n     * @param fn - The animation function to be added, which takes a player object and progress value.When calling addAnimation. progress is 0.\n     * @returns The id of the newly added animation.\n     *\n     * @example\n     * Rotate the player while playing the idle animation.\n     * ```\n     * skinViewer.animation = new skinview3d.IdleAnimation();\n     * skinViewer.animation.addAnimation((player, progress)=>player.rotation.y = progress);\n     * ```\n     */\n    addAnimation(fn) {\n        const id = this.currentId++;\n        this.progress0.set(id, this.progress);\n        this.animationObjects.set(id, fn);\n        return id;\n    }\n    /**\n     * Removes an animation created by the addAnimation method by its id.\n     *\n     * If the id is undefined, this method will do nothing.\n     *\n     * @param id - The id of the animation to remove.\n     *\n     * @example\n     * Rotate the player then stop and reset the rotation after 1s.\n     * ```\n     * var r;\n     * r=skinViewer.animation.addAnimation((pl, pr) => {\n     * \tpl.rotation.x = pr;\n     * });\n     * setTimeout(()=>{\n     * \tskinViewer.animation.addAnimation((pl, pr,id) => {\n     * \t\tpl.rotation.x=0;\n     * \t\tskinViewer.animation.removeAnimation(id);\n     * \t})\n     * \tskinViewer.animation.removeAnimation(r);\n     * },1000)\n     * ```\n     */\n    removeAnimation(id) {\n        if (id != undefined) {\n            this.animationObjects.delete(id);\n            this.progress0.delete(id);\n        }\n    }\n}\n/**\n * A class that helps you create an animation from a function.\n *\n * @example\n * To create an animation that rotates the player:\n * ```\n * new FunctionAnimation((player, progress) => player.rotation.y = progress)\n * ```\n */\nclass FunctionAnimation extends PlayerAnimation {\n    constructor(fn) {\n        super();\n        Object.defineProperty(this, \"fn\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.fn = fn;\n    }\n    animate(player, delta) {\n        this.fn(player, this.progress, delta);\n    }\n}\nclass IdleAnimation extends PlayerAnimation {\n    animate(player) {\n        // Multiply by animation's natural speed\n        const t = this.progress * 2;\n        // Arm swing\n        const basicArmRotationZ = Math.PI * 0.02;\n        player.skin.leftArm.rotation.z = Math.cos(t) * 0.03 + basicArmRotationZ;\n        player.skin.rightArm.rotation.z = Math.cos(t + Math.PI) * 0.03 - basicArmRotationZ;\n        // Always add an angle for cape around the x axis\n        const basicCapeRotationX = Math.PI * 0.06;\n        player.cape.rotation.x = Math.sin(t) * 0.01 + basicCapeRotationX;\n    }\n}\nclass WalkingAnimation extends PlayerAnimation {\n    constructor() {\n        super(...arguments);\n        /**\n         * Whether to shake head when walking.\n         *\n         * @defaultValue `true`\n         */\n        Object.defineProperty(this, \"headBobbing\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    animate(player) {\n        // Multiply by animation's natural speed\n        const t = this.progress * 8;\n        // Leg swing\n        player.skin.leftLeg.rotation.x = Math.sin(t) * 0.5;\n        player.skin.rightLeg.rotation.x = Math.sin(t + Math.PI) * 0.5;\n        // Arm swing\n        player.skin.leftArm.rotation.x = Math.sin(t + Math.PI) * 0.5;\n        player.skin.rightArm.rotation.x = Math.sin(t) * 0.5;\n        const basicArmRotationZ = Math.PI * 0.02;\n        player.skin.leftArm.rotation.z = Math.cos(t) * 0.03 + basicArmRotationZ;\n        player.skin.rightArm.rotation.z = Math.cos(t + Math.PI) * 0.03 - basicArmRotationZ;\n        if (this.headBobbing) {\n            // Head shaking with different frequency & amplitude\n            player.skin.head.rotation.y = Math.sin(t / 4) * 0.2;\n            player.skin.head.rotation.x = Math.sin(t / 5) * 0.1;\n        }\n        else {\n            player.skin.head.rotation.y = 0;\n            player.skin.head.rotation.x = 0;\n        }\n        // Always add an angle for cape around the x axis\n        const basicCapeRotationX = Math.PI * 0.06;\n        player.cape.rotation.x = Math.sin(t / 1.5) * 0.06 + basicCapeRotationX;\n    }\n}\nclass RunningAnimation extends PlayerAnimation {\n    animate(player) {\n        // Multiply by animation's natural speed\n        const t = this.progress * 15 + Math.PI * 0.5;\n        // Leg swing with larger amplitude\n        player.skin.leftLeg.rotation.x = Math.cos(t + Math.PI) * 1.3;\n        player.skin.rightLeg.rotation.x = Math.cos(t) * 1.3;\n        // Arm swing\n        player.skin.leftArm.rotation.x = Math.cos(t) * 1.5;\n        player.skin.rightArm.rotation.x = Math.cos(t + Math.PI) * 1.5;\n        const basicArmRotationZ = Math.PI * 0.1;\n        player.skin.leftArm.rotation.z = Math.cos(t) * 0.1 + basicArmRotationZ;\n        player.skin.rightArm.rotation.z = Math.cos(t + Math.PI) * 0.1 - basicArmRotationZ;\n        // Jumping\n        player.position.y = Math.cos(t * 2);\n        // Dodging when running\n        player.position.x = Math.cos(t) * 0.15;\n        // Slightly tilting when running\n        player.rotation.z = Math.cos(t + Math.PI) * 0.01;\n        // Apply higher swing frequency, lower amplitude,\n        // and greater basic rotation around x axis,\n        // to cape when running.\n        const basicCapeRotationX = Math.PI * 0.3;\n        player.cape.rotation.x = Math.sin(t * 2) * 0.1 + basicCapeRotationX;\n        // What about head shaking?\n        // You shouldn't glance right and left when running dude :P\n    }\n}\nfunction clamp(num, min, max) {\n    return num <= min ? min : num >= max ? max : num;\n}\nclass FlyingAnimation extends PlayerAnimation {\n    animate(player) {\n        // Body rotation finishes in 0.5s\n        // Elytra expansion finishes in 3.3s\n        const t = this.progress > 0 ? this.progress * 20 : 0;\n        const startProgress = clamp((t * t) / 100, 0, 1);\n        player.rotation.x = (startProgress * Math.PI) / 2;\n        player.skin.head.rotation.x = startProgress > 0.5 ? Math.PI / 4 - player.rotation.x : 0;\n        const basicArmRotationZ = Math.PI * 0.25 * startProgress;\n        player.skin.leftArm.rotation.z = basicArmRotationZ;\n        player.skin.rightArm.rotation.z = -basicArmRotationZ;\n        const elytraRotationX = 0.34906584;\n        const elytraRotationZ = Math.PI / 2;\n        const interpolation = Math.pow(0.9, t);\n        player.elytra.leftWing.rotation.x = elytraRotationX + interpolation * (0.2617994 - elytraRotationX);\n        player.elytra.leftWing.rotation.z = elytraRotationZ + interpolation * (0.2617994 - elytraRotationZ);\n        player.elytra.updateRightWing();\n    }\n}\nclass WaveAnimation extends PlayerAnimation {\n    constructor(whichArm = \"left\") {\n        super();\n        Object.defineProperty(this, \"whichArm\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.whichArm = whichArm;\n    }\n    animate(player) {\n        const t = this.progress * 2 * Math.PI * 0.5;\n        const targetArm = this.whichArm === \"left\" ? player.skin.leftArm : player.skin.rightArm;\n        targetArm.rotation.x = 180;\n        targetArm.rotation.z = Math.sin(t) * 0.5;\n    }\n}\nclass CrouchAnimation extends PlayerAnimation {\n    constructor() {\n        super(...arguments);\n        /**\n         * Whether to show the progress of animation.\n         * Because there is no progress in the crouch animation in Minecraft, the default value here is false.\n         * @defaultValue `false`\n         */\n        Object.defineProperty(this, \"showProgress\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        /**\n         * Whether to run this animation once.\n         *\n         * @defaultValue `false`\n         */\n        Object.defineProperty(this, \"runOnce\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"isRunningHitAnimation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"hitAnimationSpeed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1\n        });\n        Object.defineProperty(this, \"erp\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        }); //elytra rotate progress\n        Object.defineProperty(this, \"isCrouched\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    /**\n     * Add the hit animation.\n     *\n     * @param speed - The speed of hit animation and the default is follow the speed of CrouchAnimation.But if the speed of CrouchAnimation is 0,this animation will not run.\n     */\n    addHitAnimation(speed = this.speed) {\n        this.isRunningHitAnimation = true;\n        this.hitAnimationSpeed = speed;\n    }\n    animate(player) {\n        let pr = this.progress * 8;\n        if (pr === 0) {\n            this.isCrouched = undefined;\n        }\n        if (this.runOnce) {\n            pr = clamp(pr, -1, 1);\n        }\n        if (!this.showProgress) {\n            pr = Math.floor(pr);\n        }\n        player.skin.body.rotation.x = 0.4537860552 * Math.abs(Math.sin((pr * Math.PI) / 2));\n        player.skin.body.position.z =\n            1.3256181 * Math.abs(Math.sin((pr * Math.PI) / 2)) - 3.4500310377 * Math.abs(Math.sin((pr * Math.PI) / 2));\n        player.skin.body.position.y = -6 - 2.103677462 * Math.abs(Math.sin((pr * Math.PI) / 2));\n        player.cape.position.y = 8 - 1.851236166577372 * Math.abs(Math.sin((pr * Math.PI) / 2));\n        player.cape.rotation.x = (10.8 * Math.PI) / 180 + 0.294220265771 * Math.abs(Math.sin((pr * Math.PI) / 2));\n        player.cape.position.z =\n            -2 + 3.786619432 * Math.abs(Math.sin((pr * Math.PI) / 2)) - 3.4500310377 * Math.abs(Math.sin((pr * Math.PI) / 2));\n        player.elytra.position.x = player.cape.position.x;\n        player.elytra.position.y = player.cape.position.y;\n        player.elytra.position.z = player.cape.position.z;\n        player.elytra.rotation.x = player.cape.rotation.x - (10.8 * Math.PI) / 180;\n        const pr1 = this.progress / this.speed;\n        if (Math.abs(Math.sin((pr * Math.PI) / 2)) === 1) {\n            this.erp = !this.isCrouched ? pr1 : this.erp;\n            this.isCrouched = true;\n            player.elytra.leftWing.rotation.z =\n                0.26179944 + 0.4582006 * Math.abs(Math.sin((Math.min(pr1 - this.erp, 1) * Math.PI) / 2));\n            player.elytra.updateRightWing();\n        }\n        else if (this.isCrouched !== undefined) {\n            this.erp = this.isCrouched ? pr1 : this.erp;\n            player.elytra.leftWing.rotation.z =\n                0.72 - 0.4582006 * Math.abs(Math.sin((Math.min(pr1 - this.erp, 1) * Math.PI) / 2));\n            player.elytra.updateRightWing();\n            this.isCrouched = false;\n        }\n        player.skin.head.position.y = -3.618325234674 * Math.abs(Math.sin((pr * Math.PI) / 2));\n        player.skin.leftArm.position.z =\n            3.618325234674 * Math.abs(Math.sin((pr * Math.PI) / 2)) - 3.4500310377 * Math.abs(Math.sin((pr * Math.PI) / 2));\n        player.skin.rightArm.position.z = player.skin.leftArm.position.z;\n        player.skin.leftArm.rotation.x = 0.410367746202 * Math.abs(Math.sin((pr * Math.PI) / 2));\n        player.skin.rightArm.rotation.x = player.skin.leftArm.rotation.x;\n        player.skin.leftArm.rotation.z = 0.1;\n        player.skin.rightArm.rotation.z = -player.skin.leftArm.rotation.z;\n        player.skin.leftArm.position.y = -2 - 2.53943318 * Math.abs(Math.sin((pr * Math.PI) / 2));\n        player.skin.rightArm.position.y = player.skin.leftArm.position.y;\n        player.skin.rightLeg.position.z = -3.4500310377 * Math.abs(Math.sin((pr * Math.PI) / 2));\n        player.skin.leftLeg.position.z = player.skin.rightLeg.position.z;\n        if (this.isRunningHitAnimation) {\n            const pr2 = this.progress;\n            let t = (this.progress * 18 * this.hitAnimationSpeed) / this.speed;\n            if (this.speed == 0) {\n                t = 0;\n            }\n            const isCrouching = Math.abs(Math.sin((pr2 * Math.PI) / 2)) === 1;\n            player.skin.rightArm.rotation.x =\n                -0.4537860552 + 2 * Math.sin(t + Math.PI) * 0.3 - (isCrouching ? 0.4537860552 : 0);\n            const basicArmRotationZ = 0.01 * Math.PI + 0.06;\n            player.skin.rightArm.rotation.z = -Math.cos(t) * 0.403 + basicArmRotationZ;\n            player.skin.body.rotation.y = -Math.cos(t) * 0.06;\n            player.skin.leftArm.rotation.x = Math.sin(t + Math.PI) * 0.077 + (isCrouching ? 0.47 : 0);\n            player.skin.leftArm.rotation.z = -Math.cos(t) * 0.015 + 0.13 - (!isCrouching ? 0.05 : 0);\n            if (!isCrouching) {\n                player.skin.leftArm.position.z = Math.cos(t) * 0.3;\n                player.skin.leftArm.position.x = 5 - Math.cos(t) * 0.05;\n            }\n        }\n    }\n}\nclass HitAnimation extends PlayerAnimation {\n    animate(player) {\n        const t = this.progress * 18;\n        player.skin.rightArm.rotation.x = -0.4537860552 * 2 + 2 * Math.sin(t + Math.PI) * 0.3;\n        const basicArmRotationZ = 0.01 * Math.PI + 0.06;\n        player.skin.rightArm.rotation.z = -Math.cos(t) * 0.403 + basicArmRotationZ;\n        player.skin.body.rotation.y = -Math.cos(t) * 0.06;\n        player.skin.leftArm.rotation.x = Math.sin(t + Math.PI) * 0.077;\n        player.skin.leftArm.rotation.z = -Math.cos(t) * 0.015 + 0.13 - 0.05;\n        player.skin.leftArm.position.z = Math.cos(t) * 0.3;\n        player.skin.leftArm.position.x = 5 - Math.cos(t) * 0.05;\n    }\n}\n//# sourceMappingURL=animation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc2tpbnZpZXczZC9saWJzL2FuaW1hdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTBDO0FBQzFDO0FBQ0EsMENBQTBDLG1CQUFtQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELFlBQVk7QUFDbkUsV0FBVyxjQUFjO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsR0FBRztBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3BvcnRmb2xpby8uL25vZGVfbW9kdWxlcy9za2ludmlldzNkL2xpYnMvYW5pbWF0aW9uLmpzPzVjMDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGxheWVyT2JqZWN0IH0gZnJvbSBcIi4vbW9kZWwuanNcIjtcbi8qKlxuICogQW4gYW5pbWF0aW9uIHdoaWNoIGNhbiBiZSBwbGF5ZWQgb24gYSB7QGxpbmsgUGxheWVyT2JqZWN0fS5cbiAqXG4gKiBUaGlzIGlzIGFuIGFic3RyYWN0IGNsYXNzLiBTdWJjbGFzc2VzIG9mIHRoaXMgY2xhc3Mgd291bGQgaW1wbGVtZW50XG4gKiBwYXJ0aWN1bGFyIGFuaW1hdGlvbnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBQbGF5ZXJBbmltYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNwZWVkIG9mIHRoZSBhbmltYXRpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZWZhdWx0VmFsdWUgYDEuMGBcbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNwZWVkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAxLjBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoZSBhbmltYXRpb24gaXMgcGF1c2VkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdFZhbHVlIGBmYWxzZWBcbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBhdXNlZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudCBwcm9ncmVzcyBvZiB0aGUgYW5pbWF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJvZ3Jlc3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImN1cnJlbnRJZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJvZ3Jlc3MwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgTWFwKClcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFuaW1hdGlvbk9iamVjdHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBNYXAoKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGxheXMgdGhlIGFuaW1hdGlvbiwgYW5kIHVwZGF0ZSB0aGUgcHJvZ3Jlc3MuXG4gICAgICpcbiAgICAgKiBUaGUgZWxhcHNlZCB0aW1lIGBkZWx0YVRpbWVgIHdpbGwgYmUgc2NhbGVkIGJ5IHtAbGluayBzcGVlZH0uXG4gICAgICogSWYge0BsaW5rIHBhdXNlZH0gaXMgYHRydWVgLCB0aGlzIG1ldGhvZCB3aWxsIGRvIG5vdGhpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGxheWVyIC0gdGhlIHBsYXllciBvYmplY3RcbiAgICAgKiBAcGFyYW0gZGVsdGFUaW1lIC0gdGltZSBlbGFwc2VkIHNpbmNlIGxhc3QgY2FsbFxuICAgICAqL1xuICAgIHVwZGF0ZShwbGF5ZXIsIGRlbHRhVGltZSkge1xuICAgICAgICBpZiAodGhpcy5wYXVzZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWx0YSA9IGRlbHRhVGltZSAqIHRoaXMuc3BlZWQ7XG4gICAgICAgIHRoaXMuYW5pbWF0ZShwbGF5ZXIsIGRlbHRhKTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25PYmplY3RzLmZvckVhY2goKGFuaW1hdGlvbiwgaWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzMCA9IHRoaXMucHJvZ3Jlc3MwLmdldChpZCk7XG4gICAgICAgICAgICBhbmltYXRpb24ocGxheWVyLCB0aGlzLnByb2dyZXNzIC0gcHJvZ3Jlc3MwLCBpZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByb2dyZXNzICs9IGRlbHRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IGFuaW1hdGlvbiBiYXNlZCBvbiB0aGUgb3JpZ2luYWwgYW5pbWF0aW9uIGFuZCByZXR1cm5zIGl0cyBpZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmbiAtIFRoZSBhbmltYXRpb24gZnVuY3Rpb24gdG8gYmUgYWRkZWQsIHdoaWNoIHRha2VzIGEgcGxheWVyIG9iamVjdCBhbmQgcHJvZ3Jlc3MgdmFsdWUuV2hlbiBjYWxsaW5nIGFkZEFuaW1hdGlvbi4gcHJvZ3Jlc3MgaXMgMC5cbiAgICAgKiBAcmV0dXJucyBUaGUgaWQgb2YgdGhlIG5ld2x5IGFkZGVkIGFuaW1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogUm90YXRlIHRoZSBwbGF5ZXIgd2hpbGUgcGxheWluZyB0aGUgaWRsZSBhbmltYXRpb24uXG4gICAgICogYGBgXG4gICAgICogc2tpblZpZXdlci5hbmltYXRpb24gPSBuZXcgc2tpbnZpZXczZC5JZGxlQW5pbWF0aW9uKCk7XG4gICAgICogc2tpblZpZXdlci5hbmltYXRpb24uYWRkQW5pbWF0aW9uKChwbGF5ZXIsIHByb2dyZXNzKT0+cGxheWVyLnJvdGF0aW9uLnkgPSBwcm9ncmVzcyk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgYWRkQW5pbWF0aW9uKGZuKSB7XG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5jdXJyZW50SWQrKztcbiAgICAgICAgdGhpcy5wcm9ncmVzczAuc2V0KGlkLCB0aGlzLnByb2dyZXNzKTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25PYmplY3RzLnNldChpZCwgZm4pO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYW4gYW5pbWF0aW9uIGNyZWF0ZWQgYnkgdGhlIGFkZEFuaW1hdGlvbiBtZXRob2QgYnkgaXRzIGlkLlxuICAgICAqXG4gICAgICogSWYgdGhlIGlkIGlzIHVuZGVmaW5lZCwgdGhpcyBtZXRob2Qgd2lsbCBkbyBub3RoaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlkIC0gVGhlIGlkIG9mIHRoZSBhbmltYXRpb24gdG8gcmVtb3ZlLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBSb3RhdGUgdGhlIHBsYXllciB0aGVuIHN0b3AgYW5kIHJlc2V0IHRoZSByb3RhdGlvbiBhZnRlciAxcy5cbiAgICAgKiBgYGBcbiAgICAgKiB2YXIgcjtcbiAgICAgKiByPXNraW5WaWV3ZXIuYW5pbWF0aW9uLmFkZEFuaW1hdGlvbigocGwsIHByKSA9PiB7XG4gICAgICogXHRwbC5yb3RhdGlvbi54ID0gcHI7XG4gICAgICogfSk7XG4gICAgICogc2V0VGltZW91dCgoKT0+e1xuICAgICAqIFx0c2tpblZpZXdlci5hbmltYXRpb24uYWRkQW5pbWF0aW9uKChwbCwgcHIsaWQpID0+IHtcbiAgICAgKiBcdFx0cGwucm90YXRpb24ueD0wO1xuICAgICAqIFx0XHRza2luVmlld2VyLmFuaW1hdGlvbi5yZW1vdmVBbmltYXRpb24oaWQpO1xuICAgICAqIFx0fSlcbiAgICAgKiBcdHNraW5WaWV3ZXIuYW5pbWF0aW9uLnJlbW92ZUFuaW1hdGlvbihyKTtcbiAgICAgKiB9LDEwMDApXG4gICAgICogYGBgXG4gICAgICovXG4gICAgcmVtb3ZlQW5pbWF0aW9uKGlkKSB7XG4gICAgICAgIGlmIChpZCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uT2JqZWN0cy5kZWxldGUoaWQpO1xuICAgICAgICAgICAgdGhpcy5wcm9ncmVzczAuZGVsZXRlKGlkKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQSBjbGFzcyB0aGF0IGhlbHBzIHlvdSBjcmVhdGUgYW4gYW5pbWF0aW9uIGZyb20gYSBmdW5jdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogVG8gY3JlYXRlIGFuIGFuaW1hdGlvbiB0aGF0IHJvdGF0ZXMgdGhlIHBsYXllcjpcbiAqIGBgYFxuICogbmV3IEZ1bmN0aW9uQW5pbWF0aW9uKChwbGF5ZXIsIHByb2dyZXNzKSA9PiBwbGF5ZXIucm90YXRpb24ueSA9IHByb2dyZXNzKVxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBGdW5jdGlvbkFuaW1hdGlvbiBleHRlbmRzIFBsYXllckFuaW1hdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZm4pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZm5cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5mbiA9IGZuO1xuICAgIH1cbiAgICBhbmltYXRlKHBsYXllciwgZGVsdGEpIHtcbiAgICAgICAgdGhpcy5mbihwbGF5ZXIsIHRoaXMucHJvZ3Jlc3MsIGRlbHRhKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgSWRsZUFuaW1hdGlvbiBleHRlbmRzIFBsYXllckFuaW1hdGlvbiB7XG4gICAgYW5pbWF0ZShwbGF5ZXIpIHtcbiAgICAgICAgLy8gTXVsdGlwbHkgYnkgYW5pbWF0aW9uJ3MgbmF0dXJhbCBzcGVlZFxuICAgICAgICBjb25zdCB0ID0gdGhpcy5wcm9ncmVzcyAqIDI7XG4gICAgICAgIC8vIEFybSBzd2luZ1xuICAgICAgICBjb25zdCBiYXNpY0FybVJvdGF0aW9uWiA9IE1hdGguUEkgKiAwLjAyO1xuICAgICAgICBwbGF5ZXIuc2tpbi5sZWZ0QXJtLnJvdGF0aW9uLnogPSBNYXRoLmNvcyh0KSAqIDAuMDMgKyBiYXNpY0FybVJvdGF0aW9uWjtcbiAgICAgICAgcGxheWVyLnNraW4ucmlnaHRBcm0ucm90YXRpb24ueiA9IE1hdGguY29zKHQgKyBNYXRoLlBJKSAqIDAuMDMgLSBiYXNpY0FybVJvdGF0aW9uWjtcbiAgICAgICAgLy8gQWx3YXlzIGFkZCBhbiBhbmdsZSBmb3IgY2FwZSBhcm91bmQgdGhlIHggYXhpc1xuICAgICAgICBjb25zdCBiYXNpY0NhcGVSb3RhdGlvblggPSBNYXRoLlBJICogMC4wNjtcbiAgICAgICAgcGxheWVyLmNhcGUucm90YXRpb24ueCA9IE1hdGguc2luKHQpICogMC4wMSArIGJhc2ljQ2FwZVJvdGF0aW9uWDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgV2Fsa2luZ0FuaW1hdGlvbiBleHRlbmRzIFBsYXllckFuaW1hdGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRvIHNoYWtlIGhlYWQgd2hlbiB3YWxraW5nLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdFZhbHVlIGB0cnVlYFxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGVhZEJvYmJpbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFuaW1hdGUocGxheWVyKSB7XG4gICAgICAgIC8vIE11bHRpcGx5IGJ5IGFuaW1hdGlvbidzIG5hdHVyYWwgc3BlZWRcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucHJvZ3Jlc3MgKiA4O1xuICAgICAgICAvLyBMZWcgc3dpbmdcbiAgICAgICAgcGxheWVyLnNraW4ubGVmdExlZy5yb3RhdGlvbi54ID0gTWF0aC5zaW4odCkgKiAwLjU7XG4gICAgICAgIHBsYXllci5za2luLnJpZ2h0TGVnLnJvdGF0aW9uLnggPSBNYXRoLnNpbih0ICsgTWF0aC5QSSkgKiAwLjU7XG4gICAgICAgIC8vIEFybSBzd2luZ1xuICAgICAgICBwbGF5ZXIuc2tpbi5sZWZ0QXJtLnJvdGF0aW9uLnggPSBNYXRoLnNpbih0ICsgTWF0aC5QSSkgKiAwLjU7XG4gICAgICAgIHBsYXllci5za2luLnJpZ2h0QXJtLnJvdGF0aW9uLnggPSBNYXRoLnNpbih0KSAqIDAuNTtcbiAgICAgICAgY29uc3QgYmFzaWNBcm1Sb3RhdGlvblogPSBNYXRoLlBJICogMC4wMjtcbiAgICAgICAgcGxheWVyLnNraW4ubGVmdEFybS5yb3RhdGlvbi56ID0gTWF0aC5jb3ModCkgKiAwLjAzICsgYmFzaWNBcm1Sb3RhdGlvblo7XG4gICAgICAgIHBsYXllci5za2luLnJpZ2h0QXJtLnJvdGF0aW9uLnogPSBNYXRoLmNvcyh0ICsgTWF0aC5QSSkgKiAwLjAzIC0gYmFzaWNBcm1Sb3RhdGlvblo7XG4gICAgICAgIGlmICh0aGlzLmhlYWRCb2JiaW5nKSB7XG4gICAgICAgICAgICAvLyBIZWFkIHNoYWtpbmcgd2l0aCBkaWZmZXJlbnQgZnJlcXVlbmN5ICYgYW1wbGl0dWRlXG4gICAgICAgICAgICBwbGF5ZXIuc2tpbi5oZWFkLnJvdGF0aW9uLnkgPSBNYXRoLnNpbih0IC8gNCkgKiAwLjI7XG4gICAgICAgICAgICBwbGF5ZXIuc2tpbi5oZWFkLnJvdGF0aW9uLnggPSBNYXRoLnNpbih0IC8gNSkgKiAwLjE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwbGF5ZXIuc2tpbi5oZWFkLnJvdGF0aW9uLnkgPSAwO1xuICAgICAgICAgICAgcGxheWVyLnNraW4uaGVhZC5yb3RhdGlvbi54ID0gMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbHdheXMgYWRkIGFuIGFuZ2xlIGZvciBjYXBlIGFyb3VuZCB0aGUgeCBheGlzXG4gICAgICAgIGNvbnN0IGJhc2ljQ2FwZVJvdGF0aW9uWCA9IE1hdGguUEkgKiAwLjA2O1xuICAgICAgICBwbGF5ZXIuY2FwZS5yb3RhdGlvbi54ID0gTWF0aC5zaW4odCAvIDEuNSkgKiAwLjA2ICsgYmFzaWNDYXBlUm90YXRpb25YO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5uaW5nQW5pbWF0aW9uIGV4dGVuZHMgUGxheWVyQW5pbWF0aW9uIHtcbiAgICBhbmltYXRlKHBsYXllcikge1xuICAgICAgICAvLyBNdWx0aXBseSBieSBhbmltYXRpb24ncyBuYXR1cmFsIHNwZWVkXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnByb2dyZXNzICogMTUgKyBNYXRoLlBJICogMC41O1xuICAgICAgICAvLyBMZWcgc3dpbmcgd2l0aCBsYXJnZXIgYW1wbGl0dWRlXG4gICAgICAgIHBsYXllci5za2luLmxlZnRMZWcucm90YXRpb24ueCA9IE1hdGguY29zKHQgKyBNYXRoLlBJKSAqIDEuMztcbiAgICAgICAgcGxheWVyLnNraW4ucmlnaHRMZWcucm90YXRpb24ueCA9IE1hdGguY29zKHQpICogMS4zO1xuICAgICAgICAvLyBBcm0gc3dpbmdcbiAgICAgICAgcGxheWVyLnNraW4ubGVmdEFybS5yb3RhdGlvbi54ID0gTWF0aC5jb3ModCkgKiAxLjU7XG4gICAgICAgIHBsYXllci5za2luLnJpZ2h0QXJtLnJvdGF0aW9uLnggPSBNYXRoLmNvcyh0ICsgTWF0aC5QSSkgKiAxLjU7XG4gICAgICAgIGNvbnN0IGJhc2ljQXJtUm90YXRpb25aID0gTWF0aC5QSSAqIDAuMTtcbiAgICAgICAgcGxheWVyLnNraW4ubGVmdEFybS5yb3RhdGlvbi56ID0gTWF0aC5jb3ModCkgKiAwLjEgKyBiYXNpY0FybVJvdGF0aW9uWjtcbiAgICAgICAgcGxheWVyLnNraW4ucmlnaHRBcm0ucm90YXRpb24ueiA9IE1hdGguY29zKHQgKyBNYXRoLlBJKSAqIDAuMSAtIGJhc2ljQXJtUm90YXRpb25aO1xuICAgICAgICAvLyBKdW1waW5nXG4gICAgICAgIHBsYXllci5wb3NpdGlvbi55ID0gTWF0aC5jb3ModCAqIDIpO1xuICAgICAgICAvLyBEb2RnaW5nIHdoZW4gcnVubmluZ1xuICAgICAgICBwbGF5ZXIucG9zaXRpb24ueCA9IE1hdGguY29zKHQpICogMC4xNTtcbiAgICAgICAgLy8gU2xpZ2h0bHkgdGlsdGluZyB3aGVuIHJ1bm5pbmdcbiAgICAgICAgcGxheWVyLnJvdGF0aW9uLnogPSBNYXRoLmNvcyh0ICsgTWF0aC5QSSkgKiAwLjAxO1xuICAgICAgICAvLyBBcHBseSBoaWdoZXIgc3dpbmcgZnJlcXVlbmN5LCBsb3dlciBhbXBsaXR1ZGUsXG4gICAgICAgIC8vIGFuZCBncmVhdGVyIGJhc2ljIHJvdGF0aW9uIGFyb3VuZCB4IGF4aXMsXG4gICAgICAgIC8vIHRvIGNhcGUgd2hlbiBydW5uaW5nLlxuICAgICAgICBjb25zdCBiYXNpY0NhcGVSb3RhdGlvblggPSBNYXRoLlBJICogMC4zO1xuICAgICAgICBwbGF5ZXIuY2FwZS5yb3RhdGlvbi54ID0gTWF0aC5zaW4odCAqIDIpICogMC4xICsgYmFzaWNDYXBlUm90YXRpb25YO1xuICAgICAgICAvLyBXaGF0IGFib3V0IGhlYWQgc2hha2luZz9cbiAgICAgICAgLy8gWW91IHNob3VsZG4ndCBnbGFuY2UgcmlnaHQgYW5kIGxlZnQgd2hlbiBydW5uaW5nIGR1ZGUgOlBcbiAgICB9XG59XG5mdW5jdGlvbiBjbGFtcChudW0sIG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIG51bSA8PSBtaW4gPyBtaW4gOiBudW0gPj0gbWF4ID8gbWF4IDogbnVtO1xufVxuZXhwb3J0IGNsYXNzIEZseWluZ0FuaW1hdGlvbiBleHRlbmRzIFBsYXllckFuaW1hdGlvbiB7XG4gICAgYW5pbWF0ZShwbGF5ZXIpIHtcbiAgICAgICAgLy8gQm9keSByb3RhdGlvbiBmaW5pc2hlcyBpbiAwLjVzXG4gICAgICAgIC8vIEVseXRyYSBleHBhbnNpb24gZmluaXNoZXMgaW4gMy4zc1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5wcm9ncmVzcyA+IDAgPyB0aGlzLnByb2dyZXNzICogMjAgOiAwO1xuICAgICAgICBjb25zdCBzdGFydFByb2dyZXNzID0gY2xhbXAoKHQgKiB0KSAvIDEwMCwgMCwgMSk7XG4gICAgICAgIHBsYXllci5yb3RhdGlvbi54ID0gKHN0YXJ0UHJvZ3Jlc3MgKiBNYXRoLlBJKSAvIDI7XG4gICAgICAgIHBsYXllci5za2luLmhlYWQucm90YXRpb24ueCA9IHN0YXJ0UHJvZ3Jlc3MgPiAwLjUgPyBNYXRoLlBJIC8gNCAtIHBsYXllci5yb3RhdGlvbi54IDogMDtcbiAgICAgICAgY29uc3QgYmFzaWNBcm1Sb3RhdGlvblogPSBNYXRoLlBJICogMC4yNSAqIHN0YXJ0UHJvZ3Jlc3M7XG4gICAgICAgIHBsYXllci5za2luLmxlZnRBcm0ucm90YXRpb24ueiA9IGJhc2ljQXJtUm90YXRpb25aO1xuICAgICAgICBwbGF5ZXIuc2tpbi5yaWdodEFybS5yb3RhdGlvbi56ID0gLWJhc2ljQXJtUm90YXRpb25aO1xuICAgICAgICBjb25zdCBlbHl0cmFSb3RhdGlvblggPSAwLjM0OTA2NTg0O1xuICAgICAgICBjb25zdCBlbHl0cmFSb3RhdGlvblogPSBNYXRoLlBJIC8gMjtcbiAgICAgICAgY29uc3QgaW50ZXJwb2xhdGlvbiA9IE1hdGgucG93KDAuOSwgdCk7XG4gICAgICAgIHBsYXllci5lbHl0cmEubGVmdFdpbmcucm90YXRpb24ueCA9IGVseXRyYVJvdGF0aW9uWCArIGludGVycG9sYXRpb24gKiAoMC4yNjE3OTk0IC0gZWx5dHJhUm90YXRpb25YKTtcbiAgICAgICAgcGxheWVyLmVseXRyYS5sZWZ0V2luZy5yb3RhdGlvbi56ID0gZWx5dHJhUm90YXRpb25aICsgaW50ZXJwb2xhdGlvbiAqICgwLjI2MTc5OTQgLSBlbHl0cmFSb3RhdGlvblopO1xuICAgICAgICBwbGF5ZXIuZWx5dHJhLnVwZGF0ZVJpZ2h0V2luZygpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBXYXZlQW5pbWF0aW9uIGV4dGVuZHMgUGxheWVyQW5pbWF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih3aGljaEFybSA9IFwibGVmdFwiKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndoaWNoQXJtXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMud2hpY2hBcm0gPSB3aGljaEFybTtcbiAgICB9XG4gICAgYW5pbWF0ZShwbGF5ZXIpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucHJvZ3Jlc3MgKiAyICogTWF0aC5QSSAqIDAuNTtcbiAgICAgICAgY29uc3QgdGFyZ2V0QXJtID0gdGhpcy53aGljaEFybSA9PT0gXCJsZWZ0XCIgPyBwbGF5ZXIuc2tpbi5sZWZ0QXJtIDogcGxheWVyLnNraW4ucmlnaHRBcm07XG4gICAgICAgIHRhcmdldEFybS5yb3RhdGlvbi54ID0gMTgwO1xuICAgICAgICB0YXJnZXRBcm0ucm90YXRpb24ueiA9IE1hdGguc2luKHQpICogMC41O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDcm91Y2hBbmltYXRpb24gZXh0ZW5kcyBQbGF5ZXJBbmltYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0byBzaG93IHRoZSBwcm9ncmVzcyBvZiBhbmltYXRpb24uXG4gICAgICAgICAqIEJlY2F1c2UgdGhlcmUgaXMgbm8gcHJvZ3Jlc3MgaW4gdGhlIGNyb3VjaCBhbmltYXRpb24gaW4gTWluZWNyYWZ0LCB0aGUgZGVmYXVsdCB2YWx1ZSBoZXJlIGlzIGZhbHNlLlxuICAgICAgICAgKiBAZGVmYXVsdFZhbHVlIGBmYWxzZWBcbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNob3dQcm9ncmVzc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRvIHJ1biB0aGlzIGFuaW1hdGlvbiBvbmNlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdFZhbHVlIGBmYWxzZWBcbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bk9uY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpc1J1bm5pbmdIaXRBbmltYXRpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoaXRBbmltYXRpb25TcGVlZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXJwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAwXG4gICAgICAgIH0pOyAvL2VseXRyYSByb3RhdGUgcHJvZ3Jlc3NcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaXNDcm91Y2hlZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIGhpdCBhbmltYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3BlZWQgLSBUaGUgc3BlZWQgb2YgaGl0IGFuaW1hdGlvbiBhbmQgdGhlIGRlZmF1bHQgaXMgZm9sbG93IHRoZSBzcGVlZCBvZiBDcm91Y2hBbmltYXRpb24uQnV0IGlmIHRoZSBzcGVlZCBvZiBDcm91Y2hBbmltYXRpb24gaXMgMCx0aGlzIGFuaW1hdGlvbiB3aWxsIG5vdCBydW4uXG4gICAgICovXG4gICAgYWRkSGl0QW5pbWF0aW9uKHNwZWVkID0gdGhpcy5zcGVlZCkge1xuICAgICAgICB0aGlzLmlzUnVubmluZ0hpdEFuaW1hdGlvbiA9IHRydWU7XG4gICAgICAgIHRoaXMuaGl0QW5pbWF0aW9uU3BlZWQgPSBzcGVlZDtcbiAgICB9XG4gICAgYW5pbWF0ZShwbGF5ZXIpIHtcbiAgICAgICAgbGV0IHByID0gdGhpcy5wcm9ncmVzcyAqIDg7XG4gICAgICAgIGlmIChwciA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5pc0Nyb3VjaGVkID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJ1bk9uY2UpIHtcbiAgICAgICAgICAgIHByID0gY2xhbXAocHIsIC0xLCAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc2hvd1Byb2dyZXNzKSB7XG4gICAgICAgICAgICBwciA9IE1hdGguZmxvb3IocHIpO1xuICAgICAgICB9XG4gICAgICAgIHBsYXllci5za2luLmJvZHkucm90YXRpb24ueCA9IDAuNDUzNzg2MDU1MiAqIE1hdGguYWJzKE1hdGguc2luKChwciAqIE1hdGguUEkpIC8gMikpO1xuICAgICAgICBwbGF5ZXIuc2tpbi5ib2R5LnBvc2l0aW9uLnogPVxuICAgICAgICAgICAgMS4zMjU2MTgxICogTWF0aC5hYnMoTWF0aC5zaW4oKHByICogTWF0aC5QSSkgLyAyKSkgLSAzLjQ1MDAzMTAzNzcgKiBNYXRoLmFicyhNYXRoLnNpbigocHIgKiBNYXRoLlBJKSAvIDIpKTtcbiAgICAgICAgcGxheWVyLnNraW4uYm9keS5wb3NpdGlvbi55ID0gLTYgLSAyLjEwMzY3NzQ2MiAqIE1hdGguYWJzKE1hdGguc2luKChwciAqIE1hdGguUEkpIC8gMikpO1xuICAgICAgICBwbGF5ZXIuY2FwZS5wb3NpdGlvbi55ID0gOCAtIDEuODUxMjM2MTY2NTc3MzcyICogTWF0aC5hYnMoTWF0aC5zaW4oKHByICogTWF0aC5QSSkgLyAyKSk7XG4gICAgICAgIHBsYXllci5jYXBlLnJvdGF0aW9uLnggPSAoMTAuOCAqIE1hdGguUEkpIC8gMTgwICsgMC4yOTQyMjAyNjU3NzEgKiBNYXRoLmFicyhNYXRoLnNpbigocHIgKiBNYXRoLlBJKSAvIDIpKTtcbiAgICAgICAgcGxheWVyLmNhcGUucG9zaXRpb24ueiA9XG4gICAgICAgICAgICAtMiArIDMuNzg2NjE5NDMyICogTWF0aC5hYnMoTWF0aC5zaW4oKHByICogTWF0aC5QSSkgLyAyKSkgLSAzLjQ1MDAzMTAzNzcgKiBNYXRoLmFicyhNYXRoLnNpbigocHIgKiBNYXRoLlBJKSAvIDIpKTtcbiAgICAgICAgcGxheWVyLmVseXRyYS5wb3NpdGlvbi54ID0gcGxheWVyLmNhcGUucG9zaXRpb24ueDtcbiAgICAgICAgcGxheWVyLmVseXRyYS5wb3NpdGlvbi55ID0gcGxheWVyLmNhcGUucG9zaXRpb24ueTtcbiAgICAgICAgcGxheWVyLmVseXRyYS5wb3NpdGlvbi56ID0gcGxheWVyLmNhcGUucG9zaXRpb24uejtcbiAgICAgICAgcGxheWVyLmVseXRyYS5yb3RhdGlvbi54ID0gcGxheWVyLmNhcGUucm90YXRpb24ueCAtICgxMC44ICogTWF0aC5QSSkgLyAxODA7XG4gICAgICAgIGNvbnN0IHByMSA9IHRoaXMucHJvZ3Jlc3MgLyB0aGlzLnNwZWVkO1xuICAgICAgICBpZiAoTWF0aC5hYnMoTWF0aC5zaW4oKHByICogTWF0aC5QSSkgLyAyKSkgPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMuZXJwID0gIXRoaXMuaXNDcm91Y2hlZCA/IHByMSA6IHRoaXMuZXJwO1xuICAgICAgICAgICAgdGhpcy5pc0Nyb3VjaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHBsYXllci5lbHl0cmEubGVmdFdpbmcucm90YXRpb24ueiA9XG4gICAgICAgICAgICAgICAgMC4yNjE3OTk0NCArIDAuNDU4MjAwNiAqIE1hdGguYWJzKE1hdGguc2luKChNYXRoLm1pbihwcjEgLSB0aGlzLmVycCwgMSkgKiBNYXRoLlBJKSAvIDIpKTtcbiAgICAgICAgICAgIHBsYXllci5lbHl0cmEudXBkYXRlUmlnaHRXaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5pc0Nyb3VjaGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZXJwID0gdGhpcy5pc0Nyb3VjaGVkID8gcHIxIDogdGhpcy5lcnA7XG4gICAgICAgICAgICBwbGF5ZXIuZWx5dHJhLmxlZnRXaW5nLnJvdGF0aW9uLnogPVxuICAgICAgICAgICAgICAgIDAuNzIgLSAwLjQ1ODIwMDYgKiBNYXRoLmFicyhNYXRoLnNpbigoTWF0aC5taW4ocHIxIC0gdGhpcy5lcnAsIDEpICogTWF0aC5QSSkgLyAyKSk7XG4gICAgICAgICAgICBwbGF5ZXIuZWx5dHJhLnVwZGF0ZVJpZ2h0V2luZygpO1xuICAgICAgICAgICAgdGhpcy5pc0Nyb3VjaGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcGxheWVyLnNraW4uaGVhZC5wb3NpdGlvbi55ID0gLTMuNjE4MzI1MjM0Njc0ICogTWF0aC5hYnMoTWF0aC5zaW4oKHByICogTWF0aC5QSSkgLyAyKSk7XG4gICAgICAgIHBsYXllci5za2luLmxlZnRBcm0ucG9zaXRpb24ueiA9XG4gICAgICAgICAgICAzLjYxODMyNTIzNDY3NCAqIE1hdGguYWJzKE1hdGguc2luKChwciAqIE1hdGguUEkpIC8gMikpIC0gMy40NTAwMzEwMzc3ICogTWF0aC5hYnMoTWF0aC5zaW4oKHByICogTWF0aC5QSSkgLyAyKSk7XG4gICAgICAgIHBsYXllci5za2luLnJpZ2h0QXJtLnBvc2l0aW9uLnogPSBwbGF5ZXIuc2tpbi5sZWZ0QXJtLnBvc2l0aW9uLno7XG4gICAgICAgIHBsYXllci5za2luLmxlZnRBcm0ucm90YXRpb24ueCA9IDAuNDEwMzY3NzQ2MjAyICogTWF0aC5hYnMoTWF0aC5zaW4oKHByICogTWF0aC5QSSkgLyAyKSk7XG4gICAgICAgIHBsYXllci5za2luLnJpZ2h0QXJtLnJvdGF0aW9uLnggPSBwbGF5ZXIuc2tpbi5sZWZ0QXJtLnJvdGF0aW9uLng7XG4gICAgICAgIHBsYXllci5za2luLmxlZnRBcm0ucm90YXRpb24ueiA9IDAuMTtcbiAgICAgICAgcGxheWVyLnNraW4ucmlnaHRBcm0ucm90YXRpb24ueiA9IC1wbGF5ZXIuc2tpbi5sZWZ0QXJtLnJvdGF0aW9uLno7XG4gICAgICAgIHBsYXllci5za2luLmxlZnRBcm0ucG9zaXRpb24ueSA9IC0yIC0gMi41Mzk0MzMxOCAqIE1hdGguYWJzKE1hdGguc2luKChwciAqIE1hdGguUEkpIC8gMikpO1xuICAgICAgICBwbGF5ZXIuc2tpbi5yaWdodEFybS5wb3NpdGlvbi55ID0gcGxheWVyLnNraW4ubGVmdEFybS5wb3NpdGlvbi55O1xuICAgICAgICBwbGF5ZXIuc2tpbi5yaWdodExlZy5wb3NpdGlvbi56ID0gLTMuNDUwMDMxMDM3NyAqIE1hdGguYWJzKE1hdGguc2luKChwciAqIE1hdGguUEkpIC8gMikpO1xuICAgICAgICBwbGF5ZXIuc2tpbi5sZWZ0TGVnLnBvc2l0aW9uLnogPSBwbGF5ZXIuc2tpbi5yaWdodExlZy5wb3NpdGlvbi56O1xuICAgICAgICBpZiAodGhpcy5pc1J1bm5pbmdIaXRBbmltYXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHByMiA9IHRoaXMucHJvZ3Jlc3M7XG4gICAgICAgICAgICBsZXQgdCA9ICh0aGlzLnByb2dyZXNzICogMTggKiB0aGlzLmhpdEFuaW1hdGlvblNwZWVkKSAvIHRoaXMuc3BlZWQ7XG4gICAgICAgICAgICBpZiAodGhpcy5zcGVlZCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpc0Nyb3VjaGluZyA9IE1hdGguYWJzKE1hdGguc2luKChwcjIgKiBNYXRoLlBJKSAvIDIpKSA9PT0gMTtcbiAgICAgICAgICAgIHBsYXllci5za2luLnJpZ2h0QXJtLnJvdGF0aW9uLnggPVxuICAgICAgICAgICAgICAgIC0wLjQ1Mzc4NjA1NTIgKyAyICogTWF0aC5zaW4odCArIE1hdGguUEkpICogMC4zIC0gKGlzQ3JvdWNoaW5nID8gMC40NTM3ODYwNTUyIDogMCk7XG4gICAgICAgICAgICBjb25zdCBiYXNpY0FybVJvdGF0aW9uWiA9IDAuMDEgKiBNYXRoLlBJICsgMC4wNjtcbiAgICAgICAgICAgIHBsYXllci5za2luLnJpZ2h0QXJtLnJvdGF0aW9uLnogPSAtTWF0aC5jb3ModCkgKiAwLjQwMyArIGJhc2ljQXJtUm90YXRpb25aO1xuICAgICAgICAgICAgcGxheWVyLnNraW4uYm9keS5yb3RhdGlvbi55ID0gLU1hdGguY29zKHQpICogMC4wNjtcbiAgICAgICAgICAgIHBsYXllci5za2luLmxlZnRBcm0ucm90YXRpb24ueCA9IE1hdGguc2luKHQgKyBNYXRoLlBJKSAqIDAuMDc3ICsgKGlzQ3JvdWNoaW5nID8gMC40NyA6IDApO1xuICAgICAgICAgICAgcGxheWVyLnNraW4ubGVmdEFybS5yb3RhdGlvbi56ID0gLU1hdGguY29zKHQpICogMC4wMTUgKyAwLjEzIC0gKCFpc0Nyb3VjaGluZyA/IDAuMDUgOiAwKTtcbiAgICAgICAgICAgIGlmICghaXNDcm91Y2hpbmcpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2tpbi5sZWZ0QXJtLnBvc2l0aW9uLnogPSBNYXRoLmNvcyh0KSAqIDAuMztcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2tpbi5sZWZ0QXJtLnBvc2l0aW9uLnggPSA1IC0gTWF0aC5jb3ModCkgKiAwLjA1O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEhpdEFuaW1hdGlvbiBleHRlbmRzIFBsYXllckFuaW1hdGlvbiB7XG4gICAgYW5pbWF0ZShwbGF5ZXIpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucHJvZ3Jlc3MgKiAxODtcbiAgICAgICAgcGxheWVyLnNraW4ucmlnaHRBcm0ucm90YXRpb24ueCA9IC0wLjQ1Mzc4NjA1NTIgKiAyICsgMiAqIE1hdGguc2luKHQgKyBNYXRoLlBJKSAqIDAuMztcbiAgICAgICAgY29uc3QgYmFzaWNBcm1Sb3RhdGlvblogPSAwLjAxICogTWF0aC5QSSArIDAuMDY7XG4gICAgICAgIHBsYXllci5za2luLnJpZ2h0QXJtLnJvdGF0aW9uLnogPSAtTWF0aC5jb3ModCkgKiAwLjQwMyArIGJhc2ljQXJtUm90YXRpb25aO1xuICAgICAgICBwbGF5ZXIuc2tpbi5ib2R5LnJvdGF0aW9uLnkgPSAtTWF0aC5jb3ModCkgKiAwLjA2O1xuICAgICAgICBwbGF5ZXIuc2tpbi5sZWZ0QXJtLnJvdGF0aW9uLnggPSBNYXRoLnNpbih0ICsgTWF0aC5QSSkgKiAwLjA3NztcbiAgICAgICAgcGxheWVyLnNraW4ubGVmdEFybS5yb3RhdGlvbi56ID0gLU1hdGguY29zKHQpICogMC4wMTUgKyAwLjEzIC0gMC4wNTtcbiAgICAgICAgcGxheWVyLnNraW4ubGVmdEFybS5wb3NpdGlvbi56ID0gTWF0aC5jb3ModCkgKiAwLjM7XG4gICAgICAgIHBsYXllci5za2luLmxlZnRBcm0ucG9zaXRpb24ueCA9IDUgLSBNYXRoLmNvcyh0KSAqIDAuMDU7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5pbWF0aW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/skinview3d/libs/animation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/skinview3d/libs/model.js":
/*!***********************************************!*\
  !*** ./node_modules/skinview3d/libs/model.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BodyPart: () => (/* binding */ BodyPart),\n/* harmony export */   CapeObject: () => (/* binding */ CapeObject),\n/* harmony export */   EarsObject: () => (/* binding */ EarsObject),\n/* harmony export */   ElytraObject: () => (/* binding */ ElytraObject),\n/* harmony export */   PlayerObject: () => (/* binding */ PlayerObject),\n/* harmony export */   SkinObject: () => (/* binding */ SkinObject)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nfunction setUVs(box, u, v, width, height, depth, textureWidth, textureHeight) {\n    const toFaceVertices = (x1, y1, x2, y2) => [\n        new three__WEBPACK_IMPORTED_MODULE_0__.Vector2(x1 / textureWidth, 1.0 - y2 / textureHeight),\n        new three__WEBPACK_IMPORTED_MODULE_0__.Vector2(x2 / textureWidth, 1.0 - y2 / textureHeight),\n        new three__WEBPACK_IMPORTED_MODULE_0__.Vector2(x2 / textureWidth, 1.0 - y1 / textureHeight),\n        new three__WEBPACK_IMPORTED_MODULE_0__.Vector2(x1 / textureWidth, 1.0 - y1 / textureHeight),\n    ];\n    const top = toFaceVertices(u + depth, v, u + width + depth, v + depth);\n    const bottom = toFaceVertices(u + width + depth, v, u + width * 2 + depth, v + depth);\n    const left = toFaceVertices(u, v + depth, u + depth, v + depth + height);\n    const front = toFaceVertices(u + depth, v + depth, u + width + depth, v + depth + height);\n    const right = toFaceVertices(u + width + depth, v + depth, u + width + depth * 2, v + height + depth);\n    const back = toFaceVertices(u + width + depth * 2, v + depth, u + width * 2 + depth * 2, v + height + depth);\n    const uvAttr = box.attributes.uv;\n    const uvRight = [right[3], right[2], right[0], right[1]];\n    const uvLeft = [left[3], left[2], left[0], left[1]];\n    const uvTop = [top[3], top[2], top[0], top[1]];\n    const uvBottom = [bottom[0], bottom[1], bottom[3], bottom[2]];\n    const uvFront = [front[3], front[2], front[0], front[1]];\n    const uvBack = [back[3], back[2], back[0], back[1]];\n    // Create a new array to hold the modified UV data\n    const newUVData = [];\n    // Iterate over the arrays and copy the data to uvData\n    for (const uvArray of [uvRight, uvLeft, uvTop, uvBottom, uvFront, uvBack]) {\n        for (const uv of uvArray) {\n            newUVData.push(uv.x, uv.y);\n        }\n    }\n    uvAttr.set(new Float32Array(newUVData));\n    uvAttr.needsUpdate = true;\n}\nfunction setSkinUVs(box, u, v, width, height, depth) {\n    setUVs(box, u, v, width, height, depth, 64, 64);\n}\nfunction setCapeUVs(box, u, v, width, height, depth) {\n    setUVs(box, u, v, width, height, depth, 64, 32);\n}\n/**\n * Notice that innerLayer and outerLayer may NOT be the direct children of the Group.\n */\nclass BodyPart extends three__WEBPACK_IMPORTED_MODULE_0__.Group {\n    constructor(innerLayer, outerLayer) {\n        super();\n        Object.defineProperty(this, \"innerLayer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: innerLayer\n        });\n        Object.defineProperty(this, \"outerLayer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: outerLayer\n        });\n        innerLayer.name = \"inner\";\n        outerLayer.name = \"outer\";\n    }\n}\nclass SkinObject extends three__WEBPACK_IMPORTED_MODULE_0__.Group {\n    constructor() {\n        super();\n        // body parts\n        Object.defineProperty(this, \"head\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"body\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"rightArm\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"leftArm\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"rightLeg\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"leftLeg\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"modelListeners\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        }); // called when model(slim property) is changed\n        Object.defineProperty(this, \"slim\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"_map\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"layer1Material\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"layer1MaterialBiased\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"layer2Material\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"layer2MaterialBiased\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.layer1Material = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n            side: three__WEBPACK_IMPORTED_MODULE_0__.FrontSide,\n        });\n        this.layer2Material = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n            side: three__WEBPACK_IMPORTED_MODULE_0__.DoubleSide,\n            transparent: true,\n            alphaTest: 1e-5,\n        });\n        this.layer1MaterialBiased = this.layer1Material.clone();\n        this.layer1MaterialBiased.polygonOffset = true;\n        this.layer1MaterialBiased.polygonOffsetFactor = 1.0;\n        this.layer1MaterialBiased.polygonOffsetUnits = 1.0;\n        this.layer2MaterialBiased = this.layer2Material.clone();\n        this.layer2MaterialBiased.polygonOffset = true;\n        this.layer2MaterialBiased.polygonOffsetFactor = 1.0;\n        this.layer2MaterialBiased.polygonOffsetUnits = 1.0;\n        // Head\n        const headBox = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(8, 8, 8);\n        setSkinUVs(headBox, 0, 0, 8, 8, 8);\n        const headMesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(headBox, this.layer1Material);\n        const head2Box = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(9, 9, 9);\n        setSkinUVs(head2Box, 32, 0, 8, 8, 8);\n        const head2Mesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(head2Box, this.layer2Material);\n        this.head = new BodyPart(headMesh, head2Mesh);\n        this.head.name = \"head\";\n        this.head.add(headMesh, head2Mesh);\n        headMesh.position.y = 4;\n        head2Mesh.position.y = 4;\n        this.add(this.head);\n        // Body\n        const bodyBox = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(8, 12, 4);\n        setSkinUVs(bodyBox, 16, 16, 8, 12, 4);\n        const bodyMesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(bodyBox, this.layer1Material);\n        const body2Box = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(8.5, 12.5, 4.5);\n        setSkinUVs(body2Box, 16, 32, 8, 12, 4);\n        const body2Mesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(body2Box, this.layer2Material);\n        this.body = new BodyPart(bodyMesh, body2Mesh);\n        this.body.name = \"body\";\n        this.body.add(bodyMesh, body2Mesh);\n        this.body.position.y = -6;\n        this.add(this.body);\n        // Right Arm\n        const rightArmBox = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry();\n        const rightArmMesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(rightArmBox, this.layer1MaterialBiased);\n        this.modelListeners.push(() => {\n            rightArmMesh.scale.x = this.slim ? 3 : 4;\n            rightArmMesh.scale.y = 12;\n            rightArmMesh.scale.z = 4;\n            setSkinUVs(rightArmBox, 40, 16, this.slim ? 3 : 4, 12, 4);\n        });\n        const rightArm2Box = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry();\n        const rightArm2Mesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(rightArm2Box, this.layer2MaterialBiased);\n        this.modelListeners.push(() => {\n            rightArm2Mesh.scale.x = this.slim ? 3.5 : 4.5;\n            rightArm2Mesh.scale.y = 12.5;\n            rightArm2Mesh.scale.z = 4.5;\n            setSkinUVs(rightArm2Box, 40, 32, this.slim ? 3 : 4, 12, 4);\n        });\n        const rightArmPivot = new three__WEBPACK_IMPORTED_MODULE_0__.Group();\n        rightArmPivot.add(rightArmMesh, rightArm2Mesh);\n        this.modelListeners.push(() => {\n            rightArmPivot.position.x = this.slim ? -0.5 : -1;\n        });\n        rightArmPivot.position.y = -4;\n        this.rightArm = new BodyPart(rightArmMesh, rightArm2Mesh);\n        this.rightArm.name = \"rightArm\";\n        this.rightArm.add(rightArmPivot);\n        this.rightArm.position.x = -5;\n        this.rightArm.position.y = -2;\n        this.add(this.rightArm);\n        // Left Arm\n        const leftArmBox = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry();\n        const leftArmMesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(leftArmBox, this.layer1MaterialBiased);\n        this.modelListeners.push(() => {\n            leftArmMesh.scale.x = this.slim ? 3 : 4;\n            leftArmMesh.scale.y = 12;\n            leftArmMesh.scale.z = 4;\n            setSkinUVs(leftArmBox, 32, 48, this.slim ? 3 : 4, 12, 4);\n        });\n        const leftArm2Box = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry();\n        const leftArm2Mesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(leftArm2Box, this.layer2MaterialBiased);\n        this.modelListeners.push(() => {\n            leftArm2Mesh.scale.x = this.slim ? 3.5 : 4.5;\n            leftArm2Mesh.scale.y = 12.5;\n            leftArm2Mesh.scale.z = 4.5;\n            setSkinUVs(leftArm2Box, 48, 48, this.slim ? 3 : 4, 12, 4);\n        });\n        const leftArmPivot = new three__WEBPACK_IMPORTED_MODULE_0__.Group();\n        leftArmPivot.add(leftArmMesh, leftArm2Mesh);\n        this.modelListeners.push(() => {\n            leftArmPivot.position.x = this.slim ? 0.5 : 1;\n        });\n        leftArmPivot.position.y = -4;\n        this.leftArm = new BodyPart(leftArmMesh, leftArm2Mesh);\n        this.leftArm.name = \"leftArm\";\n        this.leftArm.add(leftArmPivot);\n        this.leftArm.position.x = 5;\n        this.leftArm.position.y = -2;\n        this.add(this.leftArm);\n        // Right Leg\n        const rightLegBox = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(4, 12, 4);\n        setSkinUVs(rightLegBox, 0, 16, 4, 12, 4);\n        const rightLegMesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(rightLegBox, this.layer1MaterialBiased);\n        const rightLeg2Box = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(4.5, 12.5, 4.5);\n        setSkinUVs(rightLeg2Box, 0, 32, 4, 12, 4);\n        const rightLeg2Mesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(rightLeg2Box, this.layer2MaterialBiased);\n        const rightLegPivot = new three__WEBPACK_IMPORTED_MODULE_0__.Group();\n        rightLegPivot.add(rightLegMesh, rightLeg2Mesh);\n        rightLegPivot.position.y = -6;\n        this.rightLeg = new BodyPart(rightLegMesh, rightLeg2Mesh);\n        this.rightLeg.name = \"rightLeg\";\n        this.rightLeg.add(rightLegPivot);\n        this.rightLeg.position.x = -1.9;\n        this.rightLeg.position.y = -12;\n        this.rightLeg.position.z = -0.1;\n        this.add(this.rightLeg);\n        // Left Leg\n        const leftLegBox = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(4, 12, 4);\n        setSkinUVs(leftLegBox, 16, 48, 4, 12, 4);\n        const leftLegMesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(leftLegBox, this.layer1MaterialBiased);\n        const leftLeg2Box = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(4.5, 12.5, 4.5);\n        setSkinUVs(leftLeg2Box, 0, 48, 4, 12, 4);\n        const leftLeg2Mesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(leftLeg2Box, this.layer2MaterialBiased);\n        const leftLegPivot = new three__WEBPACK_IMPORTED_MODULE_0__.Group();\n        leftLegPivot.add(leftLegMesh, leftLeg2Mesh);\n        leftLegPivot.position.y = -6;\n        this.leftLeg = new BodyPart(leftLegMesh, leftLeg2Mesh);\n        this.leftLeg.name = \"leftLeg\";\n        this.leftLeg.add(leftLegPivot);\n        this.leftLeg.position.x = 1.9;\n        this.leftLeg.position.y = -12;\n        this.leftLeg.position.z = -0.1;\n        this.add(this.leftLeg);\n        this.modelType = \"default\";\n    }\n    get map() {\n        return this._map;\n    }\n    set map(newMap) {\n        this._map = newMap;\n        this.layer1Material.map = newMap;\n        this.layer1Material.needsUpdate = true;\n        this.layer1MaterialBiased.map = newMap;\n        this.layer1MaterialBiased.needsUpdate = true;\n        this.layer2Material.map = newMap;\n        this.layer2Material.needsUpdate = true;\n        this.layer2MaterialBiased.map = newMap;\n        this.layer2MaterialBiased.needsUpdate = true;\n    }\n    get modelType() {\n        return this.slim ? \"slim\" : \"default\";\n    }\n    set modelType(value) {\n        this.slim = value === \"slim\";\n        this.modelListeners.forEach(listener => listener());\n    }\n    getBodyParts() {\n        return this.children.filter(it => it instanceof BodyPart);\n    }\n    setInnerLayerVisible(value) {\n        this.getBodyParts().forEach(part => (part.innerLayer.visible = value));\n    }\n    setOuterLayerVisible(value) {\n        this.getBodyParts().forEach(part => (part.outerLayer.visible = value));\n    }\n    resetJoints() {\n        this.head.rotation.set(0, 0, 0);\n        this.leftArm.rotation.set(0, 0, 0);\n        this.rightArm.rotation.set(0, 0, 0);\n        this.leftLeg.rotation.set(0, 0, 0);\n        this.rightLeg.rotation.set(0, 0, 0);\n        this.body.rotation.set(0, 0, 0);\n        this.head.position.y = 0;\n        this.body.position.y = -6;\n        this.body.position.z = 0;\n        this.rightArm.position.x = -5;\n        this.rightArm.position.y = -2;\n        this.rightArm.position.z = 0;\n        this.leftArm.position.x = 5;\n        this.leftArm.position.y = -2;\n        this.leftArm.position.z = 0;\n        this.rightLeg.position.x = -1.9;\n        this.rightLeg.position.y = -12;\n        this.rightLeg.position.z = -0.1;\n        this.leftLeg.position.x = 1.9;\n        this.leftLeg.position.y = -12;\n        this.leftLeg.position.z = -0.1;\n    }\n}\nclass CapeObject extends three__WEBPACK_IMPORTED_MODULE_0__.Group {\n    constructor() {\n        super();\n        Object.defineProperty(this, \"cape\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"material\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.material = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n            side: three__WEBPACK_IMPORTED_MODULE_0__.DoubleSide,\n            transparent: true,\n            alphaTest: 1e-5,\n        });\n        // +z (front) - inside of cape\n        // -z (back) - outside of cape\n        const capeBox = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(10, 16, 1);\n        setCapeUVs(capeBox, 0, 0, 10, 16, 1);\n        this.cape = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(capeBox, this.material);\n        this.cape.position.y = -8;\n        this.cape.position.z = 0.5;\n        this.add(this.cape);\n    }\n    get map() {\n        return this.material.map;\n    }\n    set map(newMap) {\n        this.material.map = newMap;\n        this.material.needsUpdate = true;\n    }\n}\nclass ElytraObject extends three__WEBPACK_IMPORTED_MODULE_0__.Group {\n    constructor() {\n        super();\n        Object.defineProperty(this, \"leftWing\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"rightWing\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"material\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.material = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n            side: three__WEBPACK_IMPORTED_MODULE_0__.DoubleSide,\n            transparent: true,\n            alphaTest: 1e-5,\n        });\n        const leftWingBox = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(12, 22, 4);\n        setCapeUVs(leftWingBox, 22, 0, 10, 20, 2);\n        const leftWingMesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(leftWingBox, this.material);\n        leftWingMesh.position.x = -5;\n        leftWingMesh.position.y = -10;\n        leftWingMesh.position.z = -1;\n        this.leftWing = new three__WEBPACK_IMPORTED_MODULE_0__.Group();\n        this.leftWing.add(leftWingMesh);\n        this.add(this.leftWing);\n        const rightWingBox = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(12, 22, 4);\n        setCapeUVs(rightWingBox, 22, 0, 10, 20, 2);\n        const rightWingMesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(rightWingBox, this.material);\n        rightWingMesh.scale.x = -1;\n        rightWingMesh.position.x = 5;\n        rightWingMesh.position.y = -10;\n        rightWingMesh.position.z = -1;\n        this.rightWing = new three__WEBPACK_IMPORTED_MODULE_0__.Group();\n        this.rightWing.add(rightWingMesh);\n        this.add(this.rightWing);\n        this.leftWing.position.x = 5;\n        this.leftWing.rotation.x = 0.2617994;\n        this.resetJoints();\n    }\n    resetJoints() {\n        this.leftWing.rotation.y = 0.01; // to avoid z-fighting\n        this.leftWing.rotation.z = 0.2617994;\n        this.updateRightWing();\n    }\n    /**\n     * Mirrors the position & rotation of left wing,\n     * and apply them to the right wing.\n     */\n    updateRightWing() {\n        this.rightWing.position.x = -this.leftWing.position.x;\n        this.rightWing.position.y = this.leftWing.position.y;\n        this.rightWing.rotation.x = this.leftWing.rotation.x;\n        this.rightWing.rotation.y = -this.leftWing.rotation.y;\n        this.rightWing.rotation.z = -this.leftWing.rotation.z;\n    }\n    get map() {\n        return this.material.map;\n    }\n    set map(newMap) {\n        this.material.map = newMap;\n        this.material.needsUpdate = true;\n    }\n}\nclass EarsObject extends three__WEBPACK_IMPORTED_MODULE_0__.Group {\n    constructor() {\n        super();\n        Object.defineProperty(this, \"rightEar\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"leftEar\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"material\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.material = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n            side: three__WEBPACK_IMPORTED_MODULE_0__.FrontSide,\n        });\n        const earBox = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(8, 8, 4 / 3);\n        setUVs(earBox, 0, 0, 6, 6, 1, 14, 7);\n        this.rightEar = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(earBox, this.material);\n        this.rightEar.name = \"rightEar\";\n        this.rightEar.position.x = -6;\n        this.add(this.rightEar);\n        this.leftEar = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(earBox, this.material);\n        this.leftEar.name = \"leftEar\";\n        this.leftEar.position.x = 6;\n        this.add(this.leftEar);\n    }\n    get map() {\n        return this.material.map;\n    }\n    set map(newMap) {\n        this.material.map = newMap;\n        this.material.needsUpdate = true;\n    }\n}\nconst CapeDefaultAngle = (10.8 * Math.PI) / 180;\nclass PlayerObject extends three__WEBPACK_IMPORTED_MODULE_0__.Group {\n    constructor() {\n        super();\n        Object.defineProperty(this, \"skin\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"cape\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"elytra\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"ears\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.skin = new SkinObject();\n        this.skin.name = \"skin\";\n        this.skin.position.y = 8;\n        this.add(this.skin);\n        this.cape = new CapeObject();\n        this.cape.name = \"cape\";\n        this.cape.position.y = 8;\n        this.cape.position.z = -2;\n        this.cape.rotation.x = CapeDefaultAngle;\n        this.cape.rotation.y = Math.PI;\n        this.add(this.cape);\n        this.elytra = new ElytraObject();\n        this.elytra.name = \"elytra\";\n        this.elytra.position.y = 8;\n        this.elytra.position.z = -2;\n        this.elytra.visible = false;\n        this.add(this.elytra);\n        this.ears = new EarsObject();\n        this.ears.name = \"ears\";\n        this.ears.position.y = 10;\n        this.ears.position.z = 2 / 3;\n        this.ears.visible = false;\n        this.skin.head.add(this.ears);\n    }\n    get backEquipment() {\n        if (this.cape.visible) {\n            return \"cape\";\n        }\n        else if (this.elytra.visible) {\n            return \"elytra\";\n        }\n        else {\n            return null;\n        }\n    }\n    set backEquipment(value) {\n        this.cape.visible = value === \"cape\";\n        this.elytra.visible = value === \"elytra\";\n    }\n    resetJoints() {\n        this.skin.resetJoints();\n        this.cape.rotation.x = CapeDefaultAngle;\n        this.cape.position.y = 8;\n        this.cape.position.z = -2;\n        this.elytra.position.y = 8;\n        this.elytra.position.z = -2;\n        this.elytra.rotation.x = 0;\n        this.elytra.resetJoints();\n    }\n}\n//# sourceMappingURL=model.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc2tpbnZpZXczZC9saWJzL21vZGVsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNEk7QUFDNUk7QUFDQTtBQUNBLFlBQVksMENBQU87QUFDbkIsWUFBWSwwQ0FBTztBQUNuQixZQUFZLDBDQUFPO0FBQ25CLFlBQVksMENBQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyx1QkFBdUIsd0NBQUs7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNPLHlCQUF5Qix3Q0FBSztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxHQUFHO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Qsa0NBQWtDLHVEQUFvQjtBQUN0RCxrQkFBa0IsNENBQVM7QUFDM0IsU0FBUztBQUNULGtDQUFrQyx1REFBb0I7QUFDdEQsa0JBQWtCLDZDQUFVO0FBQzVCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDhDQUFXO0FBQ3ZDO0FBQ0EsNkJBQTZCLHVDQUFJO0FBQ2pDLDZCQUE2Qiw4Q0FBVztBQUN4QztBQUNBLDhCQUE4Qix1Q0FBSTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw4Q0FBVztBQUN2QztBQUNBLDZCQUE2Qix1Q0FBSTtBQUNqQyw2QkFBNkIsOENBQVc7QUFDeEM7QUFDQSw4QkFBOEIsdUNBQUk7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDhDQUFXO0FBQzNDLGlDQUFpQyx1Q0FBSTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGlDQUFpQyw4Q0FBVztBQUM1QyxrQ0FBa0MsdUNBQUk7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxrQ0FBa0Msd0NBQUs7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsOENBQVc7QUFDMUMsZ0NBQWdDLHVDQUFJO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZ0NBQWdDLDhDQUFXO0FBQzNDLGlDQUFpQyx1Q0FBSTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGlDQUFpQyx3Q0FBSztBQUN0QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw4Q0FBVztBQUMzQztBQUNBLGlDQUFpQyx1Q0FBSTtBQUNyQyxpQ0FBaUMsOENBQVc7QUFDNUM7QUFDQSxrQ0FBa0MsdUNBQUk7QUFDdEMsa0NBQWtDLHdDQUFLO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDhDQUFXO0FBQzFDO0FBQ0EsZ0NBQWdDLHVDQUFJO0FBQ3BDLGdDQUFnQyw4Q0FBVztBQUMzQztBQUNBLGlDQUFpQyx1Q0FBSTtBQUNyQyxpQ0FBaUMsd0NBQUs7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLHlCQUF5Qix3Q0FBSztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULDRCQUE0Qix1REFBb0I7QUFDaEQsa0JBQWtCLDZDQUFVO0FBQzVCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDRCQUE0Qiw4Q0FBVztBQUN2QztBQUNBLHdCQUF3Qix1Q0FBSTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTywyQkFBMkIsd0NBQUs7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULDRCQUE0Qix1REFBb0I7QUFDaEQsa0JBQWtCLDZDQUFVO0FBQzVCO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZ0NBQWdDLDhDQUFXO0FBQzNDO0FBQ0EsaUNBQWlDLHVDQUFJO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix3Q0FBSztBQUNqQztBQUNBO0FBQ0EsaUNBQWlDLDhDQUFXO0FBQzVDO0FBQ0Esa0NBQWtDLHVDQUFJO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHdDQUFLO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08seUJBQXlCLHdDQUFLO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCw0QkFBNEIsdURBQW9CO0FBQ2hELGtCQUFrQiw0Q0FBUztBQUMzQixTQUFTO0FBQ1QsMkJBQTJCLDhDQUFXO0FBQ3RDO0FBQ0EsNEJBQTRCLHVDQUFJO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1Q0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLDJCQUEyQix3Q0FBSztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb3J0Zm9saW8vLi9ub2RlX21vZHVsZXMvc2tpbnZpZXczZC9saWJzL21vZGVsLmpzP2E2NjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm94R2VvbWV0cnksIEJ1ZmZlckF0dHJpYnV0ZSwgRG91YmxlU2lkZSwgRnJvbnRTaWRlLCBHcm91cCwgTWVzaCwgTWVzaFN0YW5kYXJkTWF0ZXJpYWwsIE9iamVjdDNELCBUZXh0dXJlLCBWZWN0b3IyLCB9IGZyb20gXCJ0aHJlZVwiO1xuZnVuY3Rpb24gc2V0VVZzKGJveCwgdSwgdiwgd2lkdGgsIGhlaWdodCwgZGVwdGgsIHRleHR1cmVXaWR0aCwgdGV4dHVyZUhlaWdodCkge1xuICAgIGNvbnN0IHRvRmFjZVZlcnRpY2VzID0gKHgxLCB5MSwgeDIsIHkyKSA9PiBbXG4gICAgICAgIG5ldyBWZWN0b3IyKHgxIC8gdGV4dHVyZVdpZHRoLCAxLjAgLSB5MiAvIHRleHR1cmVIZWlnaHQpLFxuICAgICAgICBuZXcgVmVjdG9yMih4MiAvIHRleHR1cmVXaWR0aCwgMS4wIC0geTIgLyB0ZXh0dXJlSGVpZ2h0KSxcbiAgICAgICAgbmV3IFZlY3RvcjIoeDIgLyB0ZXh0dXJlV2lkdGgsIDEuMCAtIHkxIC8gdGV4dHVyZUhlaWdodCksXG4gICAgICAgIG5ldyBWZWN0b3IyKHgxIC8gdGV4dHVyZVdpZHRoLCAxLjAgLSB5MSAvIHRleHR1cmVIZWlnaHQpLFxuICAgIF07XG4gICAgY29uc3QgdG9wID0gdG9GYWNlVmVydGljZXModSArIGRlcHRoLCB2LCB1ICsgd2lkdGggKyBkZXB0aCwgdiArIGRlcHRoKTtcbiAgICBjb25zdCBib3R0b20gPSB0b0ZhY2VWZXJ0aWNlcyh1ICsgd2lkdGggKyBkZXB0aCwgdiwgdSArIHdpZHRoICogMiArIGRlcHRoLCB2ICsgZGVwdGgpO1xuICAgIGNvbnN0IGxlZnQgPSB0b0ZhY2VWZXJ0aWNlcyh1LCB2ICsgZGVwdGgsIHUgKyBkZXB0aCwgdiArIGRlcHRoICsgaGVpZ2h0KTtcbiAgICBjb25zdCBmcm9udCA9IHRvRmFjZVZlcnRpY2VzKHUgKyBkZXB0aCwgdiArIGRlcHRoLCB1ICsgd2lkdGggKyBkZXB0aCwgdiArIGRlcHRoICsgaGVpZ2h0KTtcbiAgICBjb25zdCByaWdodCA9IHRvRmFjZVZlcnRpY2VzKHUgKyB3aWR0aCArIGRlcHRoLCB2ICsgZGVwdGgsIHUgKyB3aWR0aCArIGRlcHRoICogMiwgdiArIGhlaWdodCArIGRlcHRoKTtcbiAgICBjb25zdCBiYWNrID0gdG9GYWNlVmVydGljZXModSArIHdpZHRoICsgZGVwdGggKiAyLCB2ICsgZGVwdGgsIHUgKyB3aWR0aCAqIDIgKyBkZXB0aCAqIDIsIHYgKyBoZWlnaHQgKyBkZXB0aCk7XG4gICAgY29uc3QgdXZBdHRyID0gYm94LmF0dHJpYnV0ZXMudXY7XG4gICAgY29uc3QgdXZSaWdodCA9IFtyaWdodFszXSwgcmlnaHRbMl0sIHJpZ2h0WzBdLCByaWdodFsxXV07XG4gICAgY29uc3QgdXZMZWZ0ID0gW2xlZnRbM10sIGxlZnRbMl0sIGxlZnRbMF0sIGxlZnRbMV1dO1xuICAgIGNvbnN0IHV2VG9wID0gW3RvcFszXSwgdG9wWzJdLCB0b3BbMF0sIHRvcFsxXV07XG4gICAgY29uc3QgdXZCb3R0b20gPSBbYm90dG9tWzBdLCBib3R0b21bMV0sIGJvdHRvbVszXSwgYm90dG9tWzJdXTtcbiAgICBjb25zdCB1dkZyb250ID0gW2Zyb250WzNdLCBmcm9udFsyXSwgZnJvbnRbMF0sIGZyb250WzFdXTtcbiAgICBjb25zdCB1dkJhY2sgPSBbYmFja1szXSwgYmFja1syXSwgYmFja1swXSwgYmFja1sxXV07XG4gICAgLy8gQ3JlYXRlIGEgbmV3IGFycmF5IHRvIGhvbGQgdGhlIG1vZGlmaWVkIFVWIGRhdGFcbiAgICBjb25zdCBuZXdVVkRhdGEgPSBbXTtcbiAgICAvLyBJdGVyYXRlIG92ZXIgdGhlIGFycmF5cyBhbmQgY29weSB0aGUgZGF0YSB0byB1dkRhdGFcbiAgICBmb3IgKGNvbnN0IHV2QXJyYXkgb2YgW3V2UmlnaHQsIHV2TGVmdCwgdXZUb3AsIHV2Qm90dG9tLCB1dkZyb250LCB1dkJhY2tdKSB7XG4gICAgICAgIGZvciAoY29uc3QgdXYgb2YgdXZBcnJheSkge1xuICAgICAgICAgICAgbmV3VVZEYXRhLnB1c2godXYueCwgdXYueSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXZBdHRyLnNldChuZXcgRmxvYXQzMkFycmF5KG5ld1VWRGF0YSkpO1xuICAgIHV2QXR0ci5uZWVkc1VwZGF0ZSA9IHRydWU7XG59XG5mdW5jdGlvbiBzZXRTa2luVVZzKGJveCwgdSwgdiwgd2lkdGgsIGhlaWdodCwgZGVwdGgpIHtcbiAgICBzZXRVVnMoYm94LCB1LCB2LCB3aWR0aCwgaGVpZ2h0LCBkZXB0aCwgNjQsIDY0KTtcbn1cbmZ1bmN0aW9uIHNldENhcGVVVnMoYm94LCB1LCB2LCB3aWR0aCwgaGVpZ2h0LCBkZXB0aCkge1xuICAgIHNldFVWcyhib3gsIHUsIHYsIHdpZHRoLCBoZWlnaHQsIGRlcHRoLCA2NCwgMzIpO1xufVxuLyoqXG4gKiBOb3RpY2UgdGhhdCBpbm5lckxheWVyIGFuZCBvdXRlckxheWVyIG1heSBOT1QgYmUgdGhlIGRpcmVjdCBjaGlsZHJlbiBvZiB0aGUgR3JvdXAuXG4gKi9cbmV4cG9ydCBjbGFzcyBCb2R5UGFydCBleHRlbmRzIEdyb3VwIHtcbiAgICBjb25zdHJ1Y3Rvcihpbm5lckxheWVyLCBvdXRlckxheWVyKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlubmVyTGF5ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGlubmVyTGF5ZXJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm91dGVyTGF5ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG91dGVyTGF5ZXJcbiAgICAgICAgfSk7XG4gICAgICAgIGlubmVyTGF5ZXIubmFtZSA9IFwiaW5uZXJcIjtcbiAgICAgICAgb3V0ZXJMYXllci5uYW1lID0gXCJvdXRlclwiO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBTa2luT2JqZWN0IGV4dGVuZHMgR3JvdXAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvLyBib2R5IHBhcnRzXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhlYWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYm9keVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyaWdodEFybVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsZWZ0QXJtXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJpZ2h0TGVnXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxlZnRMZWdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibW9kZWxMaXN0ZW5lcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pOyAvLyBjYWxsZWQgd2hlbiBtb2RlbChzbGltIHByb3BlcnR5KSBpcyBjaGFuZ2VkXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNsaW1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfbWFwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBudWxsXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsYXllcjFNYXRlcmlhbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsYXllcjFNYXRlcmlhbEJpYXNlZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsYXllcjJNYXRlcmlhbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsYXllcjJNYXRlcmlhbEJpYXNlZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxheWVyMU1hdGVyaWFsID0gbmV3IE1lc2hTdGFuZGFyZE1hdGVyaWFsKHtcbiAgICAgICAgICAgIHNpZGU6IEZyb250U2lkZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGF5ZXIyTWF0ZXJpYWwgPSBuZXcgTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgICAgICAgICAgc2lkZTogRG91YmxlU2lkZSxcbiAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLFxuICAgICAgICAgICAgYWxwaGFUZXN0OiAxZS01LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sYXllcjFNYXRlcmlhbEJpYXNlZCA9IHRoaXMubGF5ZXIxTWF0ZXJpYWwuY2xvbmUoKTtcbiAgICAgICAgdGhpcy5sYXllcjFNYXRlcmlhbEJpYXNlZC5wb2x5Z29uT2Zmc2V0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sYXllcjFNYXRlcmlhbEJpYXNlZC5wb2x5Z29uT2Zmc2V0RmFjdG9yID0gMS4wO1xuICAgICAgICB0aGlzLmxheWVyMU1hdGVyaWFsQmlhc2VkLnBvbHlnb25PZmZzZXRVbml0cyA9IDEuMDtcbiAgICAgICAgdGhpcy5sYXllcjJNYXRlcmlhbEJpYXNlZCA9IHRoaXMubGF5ZXIyTWF0ZXJpYWwuY2xvbmUoKTtcbiAgICAgICAgdGhpcy5sYXllcjJNYXRlcmlhbEJpYXNlZC5wb2x5Z29uT2Zmc2V0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sYXllcjJNYXRlcmlhbEJpYXNlZC5wb2x5Z29uT2Zmc2V0RmFjdG9yID0gMS4wO1xuICAgICAgICB0aGlzLmxheWVyMk1hdGVyaWFsQmlhc2VkLnBvbHlnb25PZmZzZXRVbml0cyA9IDEuMDtcbiAgICAgICAgLy8gSGVhZFxuICAgICAgICBjb25zdCBoZWFkQm94ID0gbmV3IEJveEdlb21ldHJ5KDgsIDgsIDgpO1xuICAgICAgICBzZXRTa2luVVZzKGhlYWRCb3gsIDAsIDAsIDgsIDgsIDgpO1xuICAgICAgICBjb25zdCBoZWFkTWVzaCA9IG5ldyBNZXNoKGhlYWRCb3gsIHRoaXMubGF5ZXIxTWF0ZXJpYWwpO1xuICAgICAgICBjb25zdCBoZWFkMkJveCA9IG5ldyBCb3hHZW9tZXRyeSg5LCA5LCA5KTtcbiAgICAgICAgc2V0U2tpblVWcyhoZWFkMkJveCwgMzIsIDAsIDgsIDgsIDgpO1xuICAgICAgICBjb25zdCBoZWFkMk1lc2ggPSBuZXcgTWVzaChoZWFkMkJveCwgdGhpcy5sYXllcjJNYXRlcmlhbCk7XG4gICAgICAgIHRoaXMuaGVhZCA9IG5ldyBCb2R5UGFydChoZWFkTWVzaCwgaGVhZDJNZXNoKTtcbiAgICAgICAgdGhpcy5oZWFkLm5hbWUgPSBcImhlYWRcIjtcbiAgICAgICAgdGhpcy5oZWFkLmFkZChoZWFkTWVzaCwgaGVhZDJNZXNoKTtcbiAgICAgICAgaGVhZE1lc2gucG9zaXRpb24ueSA9IDQ7XG4gICAgICAgIGhlYWQyTWVzaC5wb3NpdGlvbi55ID0gNDtcbiAgICAgICAgdGhpcy5hZGQodGhpcy5oZWFkKTtcbiAgICAgICAgLy8gQm9keVxuICAgICAgICBjb25zdCBib2R5Qm94ID0gbmV3IEJveEdlb21ldHJ5KDgsIDEyLCA0KTtcbiAgICAgICAgc2V0U2tpblVWcyhib2R5Qm94LCAxNiwgMTYsIDgsIDEyLCA0KTtcbiAgICAgICAgY29uc3QgYm9keU1lc2ggPSBuZXcgTWVzaChib2R5Qm94LCB0aGlzLmxheWVyMU1hdGVyaWFsKTtcbiAgICAgICAgY29uc3QgYm9keTJCb3ggPSBuZXcgQm94R2VvbWV0cnkoOC41LCAxMi41LCA0LjUpO1xuICAgICAgICBzZXRTa2luVVZzKGJvZHkyQm94LCAxNiwgMzIsIDgsIDEyLCA0KTtcbiAgICAgICAgY29uc3QgYm9keTJNZXNoID0gbmV3IE1lc2goYm9keTJCb3gsIHRoaXMubGF5ZXIyTWF0ZXJpYWwpO1xuICAgICAgICB0aGlzLmJvZHkgPSBuZXcgQm9keVBhcnQoYm9keU1lc2gsIGJvZHkyTWVzaCk7XG4gICAgICAgIHRoaXMuYm9keS5uYW1lID0gXCJib2R5XCI7XG4gICAgICAgIHRoaXMuYm9keS5hZGQoYm9keU1lc2gsIGJvZHkyTWVzaCk7XG4gICAgICAgIHRoaXMuYm9keS5wb3NpdGlvbi55ID0gLTY7XG4gICAgICAgIHRoaXMuYWRkKHRoaXMuYm9keSk7XG4gICAgICAgIC8vIFJpZ2h0IEFybVxuICAgICAgICBjb25zdCByaWdodEFybUJveCA9IG5ldyBCb3hHZW9tZXRyeSgpO1xuICAgICAgICBjb25zdCByaWdodEFybU1lc2ggPSBuZXcgTWVzaChyaWdodEFybUJveCwgdGhpcy5sYXllcjFNYXRlcmlhbEJpYXNlZCk7XG4gICAgICAgIHRoaXMubW9kZWxMaXN0ZW5lcnMucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICByaWdodEFybU1lc2guc2NhbGUueCA9IHRoaXMuc2xpbSA/IDMgOiA0O1xuICAgICAgICAgICAgcmlnaHRBcm1NZXNoLnNjYWxlLnkgPSAxMjtcbiAgICAgICAgICAgIHJpZ2h0QXJtTWVzaC5zY2FsZS56ID0gNDtcbiAgICAgICAgICAgIHNldFNraW5VVnMocmlnaHRBcm1Cb3gsIDQwLCAxNiwgdGhpcy5zbGltID8gMyA6IDQsIDEyLCA0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJpZ2h0QXJtMkJveCA9IG5ldyBCb3hHZW9tZXRyeSgpO1xuICAgICAgICBjb25zdCByaWdodEFybTJNZXNoID0gbmV3IE1lc2gocmlnaHRBcm0yQm94LCB0aGlzLmxheWVyMk1hdGVyaWFsQmlhc2VkKTtcbiAgICAgICAgdGhpcy5tb2RlbExpc3RlbmVycy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIHJpZ2h0QXJtMk1lc2guc2NhbGUueCA9IHRoaXMuc2xpbSA/IDMuNSA6IDQuNTtcbiAgICAgICAgICAgIHJpZ2h0QXJtMk1lc2guc2NhbGUueSA9IDEyLjU7XG4gICAgICAgICAgICByaWdodEFybTJNZXNoLnNjYWxlLnogPSA0LjU7XG4gICAgICAgICAgICBzZXRTa2luVVZzKHJpZ2h0QXJtMkJveCwgNDAsIDMyLCB0aGlzLnNsaW0gPyAzIDogNCwgMTIsIDQpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmlnaHRBcm1QaXZvdCA9IG5ldyBHcm91cCgpO1xuICAgICAgICByaWdodEFybVBpdm90LmFkZChyaWdodEFybU1lc2gsIHJpZ2h0QXJtMk1lc2gpO1xuICAgICAgICB0aGlzLm1vZGVsTGlzdGVuZXJzLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgcmlnaHRBcm1QaXZvdC5wb3NpdGlvbi54ID0gdGhpcy5zbGltID8gLTAuNSA6IC0xO1xuICAgICAgICB9KTtcbiAgICAgICAgcmlnaHRBcm1QaXZvdC5wb3NpdGlvbi55ID0gLTQ7XG4gICAgICAgIHRoaXMucmlnaHRBcm0gPSBuZXcgQm9keVBhcnQocmlnaHRBcm1NZXNoLCByaWdodEFybTJNZXNoKTtcbiAgICAgICAgdGhpcy5yaWdodEFybS5uYW1lID0gXCJyaWdodEFybVwiO1xuICAgICAgICB0aGlzLnJpZ2h0QXJtLmFkZChyaWdodEFybVBpdm90KTtcbiAgICAgICAgdGhpcy5yaWdodEFybS5wb3NpdGlvbi54ID0gLTU7XG4gICAgICAgIHRoaXMucmlnaHRBcm0ucG9zaXRpb24ueSA9IC0yO1xuICAgICAgICB0aGlzLmFkZCh0aGlzLnJpZ2h0QXJtKTtcbiAgICAgICAgLy8gTGVmdCBBcm1cbiAgICAgICAgY29uc3QgbGVmdEFybUJveCA9IG5ldyBCb3hHZW9tZXRyeSgpO1xuICAgICAgICBjb25zdCBsZWZ0QXJtTWVzaCA9IG5ldyBNZXNoKGxlZnRBcm1Cb3gsIHRoaXMubGF5ZXIxTWF0ZXJpYWxCaWFzZWQpO1xuICAgICAgICB0aGlzLm1vZGVsTGlzdGVuZXJzLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgbGVmdEFybU1lc2guc2NhbGUueCA9IHRoaXMuc2xpbSA/IDMgOiA0O1xuICAgICAgICAgICAgbGVmdEFybU1lc2guc2NhbGUueSA9IDEyO1xuICAgICAgICAgICAgbGVmdEFybU1lc2guc2NhbGUueiA9IDQ7XG4gICAgICAgICAgICBzZXRTa2luVVZzKGxlZnRBcm1Cb3gsIDMyLCA0OCwgdGhpcy5zbGltID8gMyA6IDQsIDEyLCA0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGxlZnRBcm0yQm94ID0gbmV3IEJveEdlb21ldHJ5KCk7XG4gICAgICAgIGNvbnN0IGxlZnRBcm0yTWVzaCA9IG5ldyBNZXNoKGxlZnRBcm0yQm94LCB0aGlzLmxheWVyMk1hdGVyaWFsQmlhc2VkKTtcbiAgICAgICAgdGhpcy5tb2RlbExpc3RlbmVycy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIGxlZnRBcm0yTWVzaC5zY2FsZS54ID0gdGhpcy5zbGltID8gMy41IDogNC41O1xuICAgICAgICAgICAgbGVmdEFybTJNZXNoLnNjYWxlLnkgPSAxMi41O1xuICAgICAgICAgICAgbGVmdEFybTJNZXNoLnNjYWxlLnogPSA0LjU7XG4gICAgICAgICAgICBzZXRTa2luVVZzKGxlZnRBcm0yQm94LCA0OCwgNDgsIHRoaXMuc2xpbSA/IDMgOiA0LCAxMiwgNCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBsZWZ0QXJtUGl2b3QgPSBuZXcgR3JvdXAoKTtcbiAgICAgICAgbGVmdEFybVBpdm90LmFkZChsZWZ0QXJtTWVzaCwgbGVmdEFybTJNZXNoKTtcbiAgICAgICAgdGhpcy5tb2RlbExpc3RlbmVycy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIGxlZnRBcm1QaXZvdC5wb3NpdGlvbi54ID0gdGhpcy5zbGltID8gMC41IDogMTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxlZnRBcm1QaXZvdC5wb3NpdGlvbi55ID0gLTQ7XG4gICAgICAgIHRoaXMubGVmdEFybSA9IG5ldyBCb2R5UGFydChsZWZ0QXJtTWVzaCwgbGVmdEFybTJNZXNoKTtcbiAgICAgICAgdGhpcy5sZWZ0QXJtLm5hbWUgPSBcImxlZnRBcm1cIjtcbiAgICAgICAgdGhpcy5sZWZ0QXJtLmFkZChsZWZ0QXJtUGl2b3QpO1xuICAgICAgICB0aGlzLmxlZnRBcm0ucG9zaXRpb24ueCA9IDU7XG4gICAgICAgIHRoaXMubGVmdEFybS5wb3NpdGlvbi55ID0gLTI7XG4gICAgICAgIHRoaXMuYWRkKHRoaXMubGVmdEFybSk7XG4gICAgICAgIC8vIFJpZ2h0IExlZ1xuICAgICAgICBjb25zdCByaWdodExlZ0JveCA9IG5ldyBCb3hHZW9tZXRyeSg0LCAxMiwgNCk7XG4gICAgICAgIHNldFNraW5VVnMocmlnaHRMZWdCb3gsIDAsIDE2LCA0LCAxMiwgNCk7XG4gICAgICAgIGNvbnN0IHJpZ2h0TGVnTWVzaCA9IG5ldyBNZXNoKHJpZ2h0TGVnQm94LCB0aGlzLmxheWVyMU1hdGVyaWFsQmlhc2VkKTtcbiAgICAgICAgY29uc3QgcmlnaHRMZWcyQm94ID0gbmV3IEJveEdlb21ldHJ5KDQuNSwgMTIuNSwgNC41KTtcbiAgICAgICAgc2V0U2tpblVWcyhyaWdodExlZzJCb3gsIDAsIDMyLCA0LCAxMiwgNCk7XG4gICAgICAgIGNvbnN0IHJpZ2h0TGVnMk1lc2ggPSBuZXcgTWVzaChyaWdodExlZzJCb3gsIHRoaXMubGF5ZXIyTWF0ZXJpYWxCaWFzZWQpO1xuICAgICAgICBjb25zdCByaWdodExlZ1Bpdm90ID0gbmV3IEdyb3VwKCk7XG4gICAgICAgIHJpZ2h0TGVnUGl2b3QuYWRkKHJpZ2h0TGVnTWVzaCwgcmlnaHRMZWcyTWVzaCk7XG4gICAgICAgIHJpZ2h0TGVnUGl2b3QucG9zaXRpb24ueSA9IC02O1xuICAgICAgICB0aGlzLnJpZ2h0TGVnID0gbmV3IEJvZHlQYXJ0KHJpZ2h0TGVnTWVzaCwgcmlnaHRMZWcyTWVzaCk7XG4gICAgICAgIHRoaXMucmlnaHRMZWcubmFtZSA9IFwicmlnaHRMZWdcIjtcbiAgICAgICAgdGhpcy5yaWdodExlZy5hZGQocmlnaHRMZWdQaXZvdCk7XG4gICAgICAgIHRoaXMucmlnaHRMZWcucG9zaXRpb24ueCA9IC0xLjk7XG4gICAgICAgIHRoaXMucmlnaHRMZWcucG9zaXRpb24ueSA9IC0xMjtcbiAgICAgICAgdGhpcy5yaWdodExlZy5wb3NpdGlvbi56ID0gLTAuMTtcbiAgICAgICAgdGhpcy5hZGQodGhpcy5yaWdodExlZyk7XG4gICAgICAgIC8vIExlZnQgTGVnXG4gICAgICAgIGNvbnN0IGxlZnRMZWdCb3ggPSBuZXcgQm94R2VvbWV0cnkoNCwgMTIsIDQpO1xuICAgICAgICBzZXRTa2luVVZzKGxlZnRMZWdCb3gsIDE2LCA0OCwgNCwgMTIsIDQpO1xuICAgICAgICBjb25zdCBsZWZ0TGVnTWVzaCA9IG5ldyBNZXNoKGxlZnRMZWdCb3gsIHRoaXMubGF5ZXIxTWF0ZXJpYWxCaWFzZWQpO1xuICAgICAgICBjb25zdCBsZWZ0TGVnMkJveCA9IG5ldyBCb3hHZW9tZXRyeSg0LjUsIDEyLjUsIDQuNSk7XG4gICAgICAgIHNldFNraW5VVnMobGVmdExlZzJCb3gsIDAsIDQ4LCA0LCAxMiwgNCk7XG4gICAgICAgIGNvbnN0IGxlZnRMZWcyTWVzaCA9IG5ldyBNZXNoKGxlZnRMZWcyQm94LCB0aGlzLmxheWVyMk1hdGVyaWFsQmlhc2VkKTtcbiAgICAgICAgY29uc3QgbGVmdExlZ1Bpdm90ID0gbmV3IEdyb3VwKCk7XG4gICAgICAgIGxlZnRMZWdQaXZvdC5hZGQobGVmdExlZ01lc2gsIGxlZnRMZWcyTWVzaCk7XG4gICAgICAgIGxlZnRMZWdQaXZvdC5wb3NpdGlvbi55ID0gLTY7XG4gICAgICAgIHRoaXMubGVmdExlZyA9IG5ldyBCb2R5UGFydChsZWZ0TGVnTWVzaCwgbGVmdExlZzJNZXNoKTtcbiAgICAgICAgdGhpcy5sZWZ0TGVnLm5hbWUgPSBcImxlZnRMZWdcIjtcbiAgICAgICAgdGhpcy5sZWZ0TGVnLmFkZChsZWZ0TGVnUGl2b3QpO1xuICAgICAgICB0aGlzLmxlZnRMZWcucG9zaXRpb24ueCA9IDEuOTtcbiAgICAgICAgdGhpcy5sZWZ0TGVnLnBvc2l0aW9uLnkgPSAtMTI7XG4gICAgICAgIHRoaXMubGVmdExlZy5wb3NpdGlvbi56ID0gLTAuMTtcbiAgICAgICAgdGhpcy5hZGQodGhpcy5sZWZ0TGVnKTtcbiAgICAgICAgdGhpcy5tb2RlbFR5cGUgPSBcImRlZmF1bHRcIjtcbiAgICB9XG4gICAgZ2V0IG1hcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcDtcbiAgICB9XG4gICAgc2V0IG1hcChuZXdNYXApIHtcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3TWFwO1xuICAgICAgICB0aGlzLmxheWVyMU1hdGVyaWFsLm1hcCA9IG5ld01hcDtcbiAgICAgICAgdGhpcy5sYXllcjFNYXRlcmlhbC5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMubGF5ZXIxTWF0ZXJpYWxCaWFzZWQubWFwID0gbmV3TWFwO1xuICAgICAgICB0aGlzLmxheWVyMU1hdGVyaWFsQmlhc2VkLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sYXllcjJNYXRlcmlhbC5tYXAgPSBuZXdNYXA7XG4gICAgICAgIHRoaXMubGF5ZXIyTWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgICAgICB0aGlzLmxheWVyMk1hdGVyaWFsQmlhc2VkLm1hcCA9IG5ld01hcDtcbiAgICAgICAgdGhpcy5sYXllcjJNYXRlcmlhbEJpYXNlZC5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgfVxuICAgIGdldCBtb2RlbFR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNsaW0gPyBcInNsaW1cIiA6IFwiZGVmYXVsdFwiO1xuICAgIH1cbiAgICBzZXQgbW9kZWxUeXBlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2xpbSA9IHZhbHVlID09PSBcInNsaW1cIjtcbiAgICAgICAgdGhpcy5tb2RlbExpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKCkpO1xuICAgIH1cbiAgICBnZXRCb2R5UGFydHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLmZpbHRlcihpdCA9PiBpdCBpbnN0YW5jZW9mIEJvZHlQYXJ0KTtcbiAgICB9XG4gICAgc2V0SW5uZXJMYXllclZpc2libGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5nZXRCb2R5UGFydHMoKS5mb3JFYWNoKHBhcnQgPT4gKHBhcnQuaW5uZXJMYXllci52aXNpYmxlID0gdmFsdWUpKTtcbiAgICB9XG4gICAgc2V0T3V0ZXJMYXllclZpc2libGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5nZXRCb2R5UGFydHMoKS5mb3JFYWNoKHBhcnQgPT4gKHBhcnQub3V0ZXJMYXllci52aXNpYmxlID0gdmFsdWUpKTtcbiAgICB9XG4gICAgcmVzZXRKb2ludHMoKSB7XG4gICAgICAgIHRoaXMuaGVhZC5yb3RhdGlvbi5zZXQoMCwgMCwgMCk7XG4gICAgICAgIHRoaXMubGVmdEFybS5yb3RhdGlvbi5zZXQoMCwgMCwgMCk7XG4gICAgICAgIHRoaXMucmlnaHRBcm0ucm90YXRpb24uc2V0KDAsIDAsIDApO1xuICAgICAgICB0aGlzLmxlZnRMZWcucm90YXRpb24uc2V0KDAsIDAsIDApO1xuICAgICAgICB0aGlzLnJpZ2h0TGVnLnJvdGF0aW9uLnNldCgwLCAwLCAwKTtcbiAgICAgICAgdGhpcy5ib2R5LnJvdGF0aW9uLnNldCgwLCAwLCAwKTtcbiAgICAgICAgdGhpcy5oZWFkLnBvc2l0aW9uLnkgPSAwO1xuICAgICAgICB0aGlzLmJvZHkucG9zaXRpb24ueSA9IC02O1xuICAgICAgICB0aGlzLmJvZHkucG9zaXRpb24ueiA9IDA7XG4gICAgICAgIHRoaXMucmlnaHRBcm0ucG9zaXRpb24ueCA9IC01O1xuICAgICAgICB0aGlzLnJpZ2h0QXJtLnBvc2l0aW9uLnkgPSAtMjtcbiAgICAgICAgdGhpcy5yaWdodEFybS5wb3NpdGlvbi56ID0gMDtcbiAgICAgICAgdGhpcy5sZWZ0QXJtLnBvc2l0aW9uLnggPSA1O1xuICAgICAgICB0aGlzLmxlZnRBcm0ucG9zaXRpb24ueSA9IC0yO1xuICAgICAgICB0aGlzLmxlZnRBcm0ucG9zaXRpb24ueiA9IDA7XG4gICAgICAgIHRoaXMucmlnaHRMZWcucG9zaXRpb24ueCA9IC0xLjk7XG4gICAgICAgIHRoaXMucmlnaHRMZWcucG9zaXRpb24ueSA9IC0xMjtcbiAgICAgICAgdGhpcy5yaWdodExlZy5wb3NpdGlvbi56ID0gLTAuMTtcbiAgICAgICAgdGhpcy5sZWZ0TGVnLnBvc2l0aW9uLnggPSAxLjk7XG4gICAgICAgIHRoaXMubGVmdExlZy5wb3NpdGlvbi55ID0gLTEyO1xuICAgICAgICB0aGlzLmxlZnRMZWcucG9zaXRpb24ueiA9IC0wLjE7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhcGVPYmplY3QgZXh0ZW5kcyBHcm91cCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhcGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF0ZXJpYWxcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG5ldyBNZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICAgICAgICBzaWRlOiBEb3VibGVTaWRlLFxuICAgICAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXG4gICAgICAgICAgICBhbHBoYVRlc3Q6IDFlLTUsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyAreiAoZnJvbnQpIC0gaW5zaWRlIG9mIGNhcGVcbiAgICAgICAgLy8gLXogKGJhY2spIC0gb3V0c2lkZSBvZiBjYXBlXG4gICAgICAgIGNvbnN0IGNhcGVCb3ggPSBuZXcgQm94R2VvbWV0cnkoMTAsIDE2LCAxKTtcbiAgICAgICAgc2V0Q2FwZVVWcyhjYXBlQm94LCAwLCAwLCAxMCwgMTYsIDEpO1xuICAgICAgICB0aGlzLmNhcGUgPSBuZXcgTWVzaChjYXBlQm94LCB0aGlzLm1hdGVyaWFsKTtcbiAgICAgICAgdGhpcy5jYXBlLnBvc2l0aW9uLnkgPSAtODtcbiAgICAgICAgdGhpcy5jYXBlLnBvc2l0aW9uLnogPSAwLjU7XG4gICAgICAgIHRoaXMuYWRkKHRoaXMuY2FwZSk7XG4gICAgfVxuICAgIGdldCBtYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsLm1hcDtcbiAgICB9XG4gICAgc2V0IG1hcChuZXdNYXApIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbC5tYXAgPSBuZXdNYXA7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBFbHl0cmFPYmplY3QgZXh0ZW5kcyBHcm91cCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxlZnRXaW5nXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJpZ2h0V2luZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXRlcmlhbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbmV3IE1lc2hTdGFuZGFyZE1hdGVyaWFsKHtcbiAgICAgICAgICAgIHNpZGU6IERvdWJsZVNpZGUsXG4gICAgICAgICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcbiAgICAgICAgICAgIGFscGhhVGVzdDogMWUtNSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGxlZnRXaW5nQm94ID0gbmV3IEJveEdlb21ldHJ5KDEyLCAyMiwgNCk7XG4gICAgICAgIHNldENhcGVVVnMobGVmdFdpbmdCb3gsIDIyLCAwLCAxMCwgMjAsIDIpO1xuICAgICAgICBjb25zdCBsZWZ0V2luZ01lc2ggPSBuZXcgTWVzaChsZWZ0V2luZ0JveCwgdGhpcy5tYXRlcmlhbCk7XG4gICAgICAgIGxlZnRXaW5nTWVzaC5wb3NpdGlvbi54ID0gLTU7XG4gICAgICAgIGxlZnRXaW5nTWVzaC5wb3NpdGlvbi55ID0gLTEwO1xuICAgICAgICBsZWZ0V2luZ01lc2gucG9zaXRpb24ueiA9IC0xO1xuICAgICAgICB0aGlzLmxlZnRXaW5nID0gbmV3IEdyb3VwKCk7XG4gICAgICAgIHRoaXMubGVmdFdpbmcuYWRkKGxlZnRXaW5nTWVzaCk7XG4gICAgICAgIHRoaXMuYWRkKHRoaXMubGVmdFdpbmcpO1xuICAgICAgICBjb25zdCByaWdodFdpbmdCb3ggPSBuZXcgQm94R2VvbWV0cnkoMTIsIDIyLCA0KTtcbiAgICAgICAgc2V0Q2FwZVVWcyhyaWdodFdpbmdCb3gsIDIyLCAwLCAxMCwgMjAsIDIpO1xuICAgICAgICBjb25zdCByaWdodFdpbmdNZXNoID0gbmV3IE1lc2gocmlnaHRXaW5nQm94LCB0aGlzLm1hdGVyaWFsKTtcbiAgICAgICAgcmlnaHRXaW5nTWVzaC5zY2FsZS54ID0gLTE7XG4gICAgICAgIHJpZ2h0V2luZ01lc2gucG9zaXRpb24ueCA9IDU7XG4gICAgICAgIHJpZ2h0V2luZ01lc2gucG9zaXRpb24ueSA9IC0xMDtcbiAgICAgICAgcmlnaHRXaW5nTWVzaC5wb3NpdGlvbi56ID0gLTE7XG4gICAgICAgIHRoaXMucmlnaHRXaW5nID0gbmV3IEdyb3VwKCk7XG4gICAgICAgIHRoaXMucmlnaHRXaW5nLmFkZChyaWdodFdpbmdNZXNoKTtcbiAgICAgICAgdGhpcy5hZGQodGhpcy5yaWdodFdpbmcpO1xuICAgICAgICB0aGlzLmxlZnRXaW5nLnBvc2l0aW9uLnggPSA1O1xuICAgICAgICB0aGlzLmxlZnRXaW5nLnJvdGF0aW9uLnggPSAwLjI2MTc5OTQ7XG4gICAgICAgIHRoaXMucmVzZXRKb2ludHMoKTtcbiAgICB9XG4gICAgcmVzZXRKb2ludHMoKSB7XG4gICAgICAgIHRoaXMubGVmdFdpbmcucm90YXRpb24ueSA9IDAuMDE7IC8vIHRvIGF2b2lkIHotZmlnaHRpbmdcbiAgICAgICAgdGhpcy5sZWZ0V2luZy5yb3RhdGlvbi56ID0gMC4yNjE3OTk0O1xuICAgICAgICB0aGlzLnVwZGF0ZVJpZ2h0V2luZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNaXJyb3JzIHRoZSBwb3NpdGlvbiAmIHJvdGF0aW9uIG9mIGxlZnQgd2luZyxcbiAgICAgKiBhbmQgYXBwbHkgdGhlbSB0byB0aGUgcmlnaHQgd2luZy5cbiAgICAgKi9cbiAgICB1cGRhdGVSaWdodFdpbmcoKSB7XG4gICAgICAgIHRoaXMucmlnaHRXaW5nLnBvc2l0aW9uLnggPSAtdGhpcy5sZWZ0V2luZy5wb3NpdGlvbi54O1xuICAgICAgICB0aGlzLnJpZ2h0V2luZy5wb3NpdGlvbi55ID0gdGhpcy5sZWZ0V2luZy5wb3NpdGlvbi55O1xuICAgICAgICB0aGlzLnJpZ2h0V2luZy5yb3RhdGlvbi54ID0gdGhpcy5sZWZ0V2luZy5yb3RhdGlvbi54O1xuICAgICAgICB0aGlzLnJpZ2h0V2luZy5yb3RhdGlvbi55ID0gLXRoaXMubGVmdFdpbmcucm90YXRpb24ueTtcbiAgICAgICAgdGhpcy5yaWdodFdpbmcucm90YXRpb24ueiA9IC10aGlzLmxlZnRXaW5nLnJvdGF0aW9uLno7XG4gICAgfVxuICAgIGdldCBtYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsLm1hcDtcbiAgICB9XG4gICAgc2V0IG1hcChuZXdNYXApIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbC5tYXAgPSBuZXdNYXA7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBFYXJzT2JqZWN0IGV4dGVuZHMgR3JvdXAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyaWdodEVhclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsZWZ0RWFyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1hdGVyaWFsXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBuZXcgTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgICAgICAgICAgc2lkZTogRnJvbnRTaWRlLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZWFyQm94ID0gbmV3IEJveEdlb21ldHJ5KDgsIDgsIDQgLyAzKTtcbiAgICAgICAgc2V0VVZzKGVhckJveCwgMCwgMCwgNiwgNiwgMSwgMTQsIDcpO1xuICAgICAgICB0aGlzLnJpZ2h0RWFyID0gbmV3IE1lc2goZWFyQm94LCB0aGlzLm1hdGVyaWFsKTtcbiAgICAgICAgdGhpcy5yaWdodEVhci5uYW1lID0gXCJyaWdodEVhclwiO1xuICAgICAgICB0aGlzLnJpZ2h0RWFyLnBvc2l0aW9uLnggPSAtNjtcbiAgICAgICAgdGhpcy5hZGQodGhpcy5yaWdodEVhcik7XG4gICAgICAgIHRoaXMubGVmdEVhciA9IG5ldyBNZXNoKGVhckJveCwgdGhpcy5tYXRlcmlhbCk7XG4gICAgICAgIHRoaXMubGVmdEVhci5uYW1lID0gXCJsZWZ0RWFyXCI7XG4gICAgICAgIHRoaXMubGVmdEVhci5wb3NpdGlvbi54ID0gNjtcbiAgICAgICAgdGhpcy5hZGQodGhpcy5sZWZ0RWFyKTtcbiAgICB9XG4gICAgZ2V0IG1hcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWwubWFwO1xuICAgIH1cbiAgICBzZXQgbWFwKG5ld01hcCkge1xuICAgICAgICB0aGlzLm1hdGVyaWFsLm1hcCA9IG5ld01hcDtcbiAgICAgICAgdGhpcy5tYXRlcmlhbC5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgfVxufVxuY29uc3QgQ2FwZURlZmF1bHRBbmdsZSA9ICgxMC44ICogTWF0aC5QSSkgLyAxODA7XG5leHBvcnQgY2xhc3MgUGxheWVyT2JqZWN0IGV4dGVuZHMgR3JvdXAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJza2luXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhcGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZWx5dHJhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVhcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5za2luID0gbmV3IFNraW5PYmplY3QoKTtcbiAgICAgICAgdGhpcy5za2luLm5hbWUgPSBcInNraW5cIjtcbiAgICAgICAgdGhpcy5za2luLnBvc2l0aW9uLnkgPSA4O1xuICAgICAgICB0aGlzLmFkZCh0aGlzLnNraW4pO1xuICAgICAgICB0aGlzLmNhcGUgPSBuZXcgQ2FwZU9iamVjdCgpO1xuICAgICAgICB0aGlzLmNhcGUubmFtZSA9IFwiY2FwZVwiO1xuICAgICAgICB0aGlzLmNhcGUucG9zaXRpb24ueSA9IDg7XG4gICAgICAgIHRoaXMuY2FwZS5wb3NpdGlvbi56ID0gLTI7XG4gICAgICAgIHRoaXMuY2FwZS5yb3RhdGlvbi54ID0gQ2FwZURlZmF1bHRBbmdsZTtcbiAgICAgICAgdGhpcy5jYXBlLnJvdGF0aW9uLnkgPSBNYXRoLlBJO1xuICAgICAgICB0aGlzLmFkZCh0aGlzLmNhcGUpO1xuICAgICAgICB0aGlzLmVseXRyYSA9IG5ldyBFbHl0cmFPYmplY3QoKTtcbiAgICAgICAgdGhpcy5lbHl0cmEubmFtZSA9IFwiZWx5dHJhXCI7XG4gICAgICAgIHRoaXMuZWx5dHJhLnBvc2l0aW9uLnkgPSA4O1xuICAgICAgICB0aGlzLmVseXRyYS5wb3NpdGlvbi56ID0gLTI7XG4gICAgICAgIHRoaXMuZWx5dHJhLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hZGQodGhpcy5lbHl0cmEpO1xuICAgICAgICB0aGlzLmVhcnMgPSBuZXcgRWFyc09iamVjdCgpO1xuICAgICAgICB0aGlzLmVhcnMubmFtZSA9IFwiZWFyc1wiO1xuICAgICAgICB0aGlzLmVhcnMucG9zaXRpb24ueSA9IDEwO1xuICAgICAgICB0aGlzLmVhcnMucG9zaXRpb24ueiA9IDIgLyAzO1xuICAgICAgICB0aGlzLmVhcnMudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNraW4uaGVhZC5hZGQodGhpcy5lYXJzKTtcbiAgICB9XG4gICAgZ2V0IGJhY2tFcXVpcG1lbnQoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhcGUudmlzaWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiY2FwZVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZWx5dHJhLnZpc2libGUpIHtcbiAgICAgICAgICAgIHJldHVybiBcImVseXRyYVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0IGJhY2tFcXVpcG1lbnQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5jYXBlLnZpc2libGUgPSB2YWx1ZSA9PT0gXCJjYXBlXCI7XG4gICAgICAgIHRoaXMuZWx5dHJhLnZpc2libGUgPSB2YWx1ZSA9PT0gXCJlbHl0cmFcIjtcbiAgICB9XG4gICAgcmVzZXRKb2ludHMoKSB7XG4gICAgICAgIHRoaXMuc2tpbi5yZXNldEpvaW50cygpO1xuICAgICAgICB0aGlzLmNhcGUucm90YXRpb24ueCA9IENhcGVEZWZhdWx0QW5nbGU7XG4gICAgICAgIHRoaXMuY2FwZS5wb3NpdGlvbi55ID0gODtcbiAgICAgICAgdGhpcy5jYXBlLnBvc2l0aW9uLnogPSAtMjtcbiAgICAgICAgdGhpcy5lbHl0cmEucG9zaXRpb24ueSA9IDg7XG4gICAgICAgIHRoaXMuZWx5dHJhLnBvc2l0aW9uLnogPSAtMjtcbiAgICAgICAgdGhpcy5lbHl0cmEucm90YXRpb24ueCA9IDA7XG4gICAgICAgIHRoaXMuZWx5dHJhLnJlc2V0Sm9pbnRzKCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9kZWwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/skinview3d/libs/model.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/skinview3d/libs/nametag.js":
/*!*************************************************!*\
  !*** ./node_modules/skinview3d/libs/nametag.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NameTagObject: () => (/* binding */ NameTagObject)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\n/**\n * A Minecraft name tag, i.e. a text label with background.\n */\nclass NameTagObject extends three__WEBPACK_IMPORTED_MODULE_0__.Sprite {\n    constructor(text = \"\", options = {}) {\n        const material = new three__WEBPACK_IMPORTED_MODULE_0__.SpriteMaterial({\n            transparent: true,\n            alphaTest: 1e-5,\n        });\n        super(material);\n        /**\n         * A promise that is resolved after the name tag is fully painted.\n         *\n         * This will be a resolved promise, if\n         * {@link NameTagOptions.repaintAfterLoaded} is `false`, or\n         * the desired font is available when the `NameTagObject` is created.\n         *\n         * If {@link NameTagOptions.repaintAfterLoaded} is `true`, and\n         * the desired font hasn't been loaded when the `NameTagObject` is created,\n         * the name tag will be painted with the fallback font first, and then\n         * repainted with the desired font after it's loaded. This promise is\n         * resolved after repainting is done.\n         */\n        Object.defineProperty(this, \"painted\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"text\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"font\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"margin\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"textStyle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"backgroundStyle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"height\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"textMaterial\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.textMaterial = material;\n        this.text = text;\n        this.font = options.font === undefined ? \"48px Minecraft\" : options.font;\n        this.margin = options.margin === undefined ? [5, 10, 5, 10] : options.margin;\n        this.textStyle = options.textStyle === undefined ? \"white\" : options.textStyle;\n        this.backgroundStyle = options.backgroundStyle === undefined ? \"rgba(0,0,0,.25)\" : options.backgroundStyle;\n        this.height = options.height === undefined ? 4.0 : options.height;\n        const repaintAfterLoaded = options.repaintAfterLoaded === undefined ? true : options.repaintAfterLoaded;\n        if (repaintAfterLoaded && !document.fonts.check(this.font, this.text)) {\n            this.paint();\n            this.painted = this.loadAndPaint();\n        }\n        else {\n            this.paint();\n            this.painted = Promise.resolve();\n        }\n    }\n    async loadAndPaint() {\n        await document.fonts.load(this.font, this.text);\n        this.paint();\n    }\n    paint() {\n        const canvas = document.createElement(\"canvas\");\n        // Measure the text size\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        let ctx = canvas.getContext(\"2d\");\n        ctx.font = this.font;\n        const metrics = ctx.measureText(this.text);\n        // Compute canvas size\n        canvas.width = this.margin[3] + metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight + this.margin[1];\n        canvas.height =\n            this.margin[0] + metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent + this.margin[2];\n        // After change canvas size, the context needs to be re-created\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        ctx = canvas.getContext(\"2d\");\n        ctx.font = this.font;\n        // Fill background\n        ctx.fillStyle = this.backgroundStyle;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n        // Draw text\n        ctx.fillStyle = this.textStyle;\n        ctx.fillText(this.text, this.margin[3] + metrics.actualBoundingBoxLeft, this.margin[0] + metrics.actualBoundingBoxAscent);\n        // Apply texture\n        const texture = new three__WEBPACK_IMPORTED_MODULE_0__.CanvasTexture(canvas);\n        texture.magFilter = three__WEBPACK_IMPORTED_MODULE_0__.NearestFilter;\n        texture.minFilter = three__WEBPACK_IMPORTED_MODULE_0__.NearestFilter;\n        this.textMaterial.map = texture;\n        this.textMaterial.needsUpdate = true;\n        // Update size\n        this.scale.x = (canvas.width / canvas.height) * this.height;\n        this.scale.y = this.height;\n    }\n}\n//# sourceMappingURL=nametag.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc2tpbnZpZXczZC9saWJzL25hbWV0YWcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNkU7QUFDN0U7QUFDQTtBQUNBO0FBQ08sNEJBQTRCLHlDQUFNO0FBQ3pDLHVDQUF1QztBQUN2Qyw2QkFBNkIsaURBQWM7QUFDM0M7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx5Q0FBeUM7QUFDckQ7QUFDQTtBQUNBLGVBQWUseUNBQXlDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0RBQWE7QUFDekMsNEJBQTRCLGdEQUFhO0FBQ3pDLDRCQUE0QixnREFBYTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9ydGZvbGlvLy4vbm9kZV9tb2R1bGVzL3NraW52aWV3M2QvbGlicy9uYW1ldGFnLmpzP2JiMGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FudmFzVGV4dHVyZSwgTmVhcmVzdEZpbHRlciwgU3ByaXRlLCBTcHJpdGVNYXRlcmlhbCB9IGZyb20gXCJ0aHJlZVwiO1xuLyoqXG4gKiBBIE1pbmVjcmFmdCBuYW1lIHRhZywgaS5lLiBhIHRleHQgbGFiZWwgd2l0aCBiYWNrZ3JvdW5kLlxuICovXG5leHBvcnQgY2xhc3MgTmFtZVRhZ09iamVjdCBleHRlbmRzIFNwcml0ZSB7XG4gICAgY29uc3RydWN0b3IodGV4dCA9IFwiXCIsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBTcHJpdGVNYXRlcmlhbCh7XG4gICAgICAgICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcbiAgICAgICAgICAgIGFscGhhVGVzdDogMWUtNSxcbiAgICAgICAgfSk7XG4gICAgICAgIHN1cGVyKG1hdGVyaWFsKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIGFmdGVyIHRoZSBuYW1lIHRhZyBpcyBmdWxseSBwYWludGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIHdpbGwgYmUgYSByZXNvbHZlZCBwcm9taXNlLCBpZlxuICAgICAgICAgKiB7QGxpbmsgTmFtZVRhZ09wdGlvbnMucmVwYWludEFmdGVyTG9hZGVkfSBpcyBgZmFsc2VgLCBvclxuICAgICAgICAgKiB0aGUgZGVzaXJlZCBmb250IGlzIGF2YWlsYWJsZSB3aGVuIHRoZSBgTmFtZVRhZ09iamVjdGAgaXMgY3JlYXRlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogSWYge0BsaW5rIE5hbWVUYWdPcHRpb25zLnJlcGFpbnRBZnRlckxvYWRlZH0gaXMgYHRydWVgLCBhbmRcbiAgICAgICAgICogdGhlIGRlc2lyZWQgZm9udCBoYXNuJ3QgYmVlbiBsb2FkZWQgd2hlbiB0aGUgYE5hbWVUYWdPYmplY3RgIGlzIGNyZWF0ZWQsXG4gICAgICAgICAqIHRoZSBuYW1lIHRhZyB3aWxsIGJlIHBhaW50ZWQgd2l0aCB0aGUgZmFsbGJhY2sgZm9udCBmaXJzdCwgYW5kIHRoZW5cbiAgICAgICAgICogcmVwYWludGVkIHdpdGggdGhlIGRlc2lyZWQgZm9udCBhZnRlciBpdCdzIGxvYWRlZC4gVGhpcyBwcm9taXNlIGlzXG4gICAgICAgICAqIHJlc29sdmVkIGFmdGVyIHJlcGFpbnRpbmcgaXMgZG9uZS5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBhaW50ZWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGV4dFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmb250XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1hcmdpblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZXh0U3R5bGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYmFja2dyb3VuZFN0eWxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhlaWdodFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZXh0TWF0ZXJpYWxcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50ZXh0TWF0ZXJpYWwgPSBtYXRlcmlhbDtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy5mb250ID0gb3B0aW9ucy5mb250ID09PSB1bmRlZmluZWQgPyBcIjQ4cHggTWluZWNyYWZ0XCIgOiBvcHRpb25zLmZvbnQ7XG4gICAgICAgIHRoaXMubWFyZ2luID0gb3B0aW9ucy5tYXJnaW4gPT09IHVuZGVmaW5lZCA/IFs1LCAxMCwgNSwgMTBdIDogb3B0aW9ucy5tYXJnaW47XG4gICAgICAgIHRoaXMudGV4dFN0eWxlID0gb3B0aW9ucy50ZXh0U3R5bGUgPT09IHVuZGVmaW5lZCA/IFwid2hpdGVcIiA6IG9wdGlvbnMudGV4dFN0eWxlO1xuICAgICAgICB0aGlzLmJhY2tncm91bmRTdHlsZSA9IG9wdGlvbnMuYmFja2dyb3VuZFN0eWxlID09PSB1bmRlZmluZWQgPyBcInJnYmEoMCwwLDAsLjI1KVwiIDogb3B0aW9ucy5iYWNrZ3JvdW5kU3R5bGU7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQgPT09IHVuZGVmaW5lZCA/IDQuMCA6IG9wdGlvbnMuaGVpZ2h0O1xuICAgICAgICBjb25zdCByZXBhaW50QWZ0ZXJMb2FkZWQgPSBvcHRpb25zLnJlcGFpbnRBZnRlckxvYWRlZCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdGlvbnMucmVwYWludEFmdGVyTG9hZGVkO1xuICAgICAgICBpZiAocmVwYWludEFmdGVyTG9hZGVkICYmICFkb2N1bWVudC5mb250cy5jaGVjayh0aGlzLmZvbnQsIHRoaXMudGV4dCkpIHtcbiAgICAgICAgICAgIHRoaXMucGFpbnQoKTtcbiAgICAgICAgICAgIHRoaXMucGFpbnRlZCA9IHRoaXMubG9hZEFuZFBhaW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBhaW50KCk7XG4gICAgICAgICAgICB0aGlzLnBhaW50ZWQgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBsb2FkQW5kUGFpbnQoKSB7XG4gICAgICAgIGF3YWl0IGRvY3VtZW50LmZvbnRzLmxvYWQodGhpcy5mb250LCB0aGlzLnRleHQpO1xuICAgICAgICB0aGlzLnBhaW50KCk7XG4gICAgfVxuICAgIHBhaW50KCkge1xuICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICAvLyBNZWFzdXJlIHRoZSB0ZXh0IHNpemVcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgbGV0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIGN0eC5mb250ID0gdGhpcy5mb250O1xuICAgICAgICBjb25zdCBtZXRyaWNzID0gY3R4Lm1lYXN1cmVUZXh0KHRoaXMudGV4dCk7XG4gICAgICAgIC8vIENvbXB1dGUgY2FudmFzIHNpemVcbiAgICAgICAgY2FudmFzLndpZHRoID0gdGhpcy5tYXJnaW5bM10gKyBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94TGVmdCArIG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hSaWdodCArIHRoaXMubWFyZ2luWzFdO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID1cbiAgICAgICAgICAgIHRoaXMubWFyZ2luWzBdICsgbWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveEFzY2VudCArIG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50ICsgdGhpcy5tYXJnaW5bMl07XG4gICAgICAgIC8vIEFmdGVyIGNoYW5nZSBjYW52YXMgc2l6ZSwgdGhlIGNvbnRleHQgbmVlZHMgdG8gYmUgcmUtY3JlYXRlZFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICBjdHguZm9udCA9IHRoaXMuZm9udDtcbiAgICAgICAgLy8gRmlsbCBiYWNrZ3JvdW5kXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmJhY2tncm91bmRTdHlsZTtcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIC8vIERyYXcgdGV4dFxuICAgICAgICBjdHguZmlsbFN0eWxlID0gdGhpcy50ZXh0U3R5bGU7XG4gICAgICAgIGN0eC5maWxsVGV4dCh0aGlzLnRleHQsIHRoaXMubWFyZ2luWzNdICsgbWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveExlZnQsIHRoaXMubWFyZ2luWzBdICsgbWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveEFzY2VudCk7XG4gICAgICAgIC8vIEFwcGx5IHRleHR1cmVcbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IG5ldyBDYW52YXNUZXh0dXJlKGNhbnZhcyk7XG4gICAgICAgIHRleHR1cmUubWFnRmlsdGVyID0gTmVhcmVzdEZpbHRlcjtcbiAgICAgICAgdGV4dHVyZS5taW5GaWx0ZXIgPSBOZWFyZXN0RmlsdGVyO1xuICAgICAgICB0aGlzLnRleHRNYXRlcmlhbC5tYXAgPSB0ZXh0dXJlO1xuICAgICAgICB0aGlzLnRleHRNYXRlcmlhbC5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgIC8vIFVwZGF0ZSBzaXplXG4gICAgICAgIHRoaXMuc2NhbGUueCA9IChjYW52YXMud2lkdGggLyBjYW52YXMuaGVpZ2h0KSAqIHRoaXMuaGVpZ2h0O1xuICAgICAgICB0aGlzLnNjYWxlLnkgPSB0aGlzLmhlaWdodDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uYW1ldGFnLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/skinview3d/libs/nametag.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/skinview3d/libs/skinview3d.js":
/*!****************************************************!*\
  !*** ./node_modules/skinview3d/libs/skinview3d.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BodyPart: () => (/* reexport safe */ _model_js__WEBPACK_IMPORTED_MODULE_0__.BodyPart),\n/* harmony export */   CapeObject: () => (/* reexport safe */ _model_js__WEBPACK_IMPORTED_MODULE_0__.CapeObject),\n/* harmony export */   CrouchAnimation: () => (/* reexport safe */ _animation_js__WEBPACK_IMPORTED_MODULE_2__.CrouchAnimation),\n/* harmony export */   EarsObject: () => (/* reexport safe */ _model_js__WEBPACK_IMPORTED_MODULE_0__.EarsObject),\n/* harmony export */   ElytraObject: () => (/* reexport safe */ _model_js__WEBPACK_IMPORTED_MODULE_0__.ElytraObject),\n/* harmony export */   FlyingAnimation: () => (/* reexport safe */ _animation_js__WEBPACK_IMPORTED_MODULE_2__.FlyingAnimation),\n/* harmony export */   FunctionAnimation: () => (/* reexport safe */ _animation_js__WEBPACK_IMPORTED_MODULE_2__.FunctionAnimation),\n/* harmony export */   HitAnimation: () => (/* reexport safe */ _animation_js__WEBPACK_IMPORTED_MODULE_2__.HitAnimation),\n/* harmony export */   IdleAnimation: () => (/* reexport safe */ _animation_js__WEBPACK_IMPORTED_MODULE_2__.IdleAnimation),\n/* harmony export */   NameTagObject: () => (/* reexport safe */ _nametag_js__WEBPACK_IMPORTED_MODULE_3__.NameTagObject),\n/* harmony export */   PlayerAnimation: () => (/* reexport safe */ _animation_js__WEBPACK_IMPORTED_MODULE_2__.PlayerAnimation),\n/* harmony export */   PlayerObject: () => (/* reexport safe */ _model_js__WEBPACK_IMPORTED_MODULE_0__.PlayerObject),\n/* harmony export */   RunningAnimation: () => (/* reexport safe */ _animation_js__WEBPACK_IMPORTED_MODULE_2__.RunningAnimation),\n/* harmony export */   SkinObject: () => (/* reexport safe */ _model_js__WEBPACK_IMPORTED_MODULE_0__.SkinObject),\n/* harmony export */   SkinViewer: () => (/* reexport safe */ _viewer_js__WEBPACK_IMPORTED_MODULE_1__.SkinViewer),\n/* harmony export */   WalkingAnimation: () => (/* reexport safe */ _animation_js__WEBPACK_IMPORTED_MODULE_2__.WalkingAnimation),\n/* harmony export */   WaveAnimation: () => (/* reexport safe */ _animation_js__WEBPACK_IMPORTED_MODULE_2__.WaveAnimation)\n/* harmony export */ });\n/* harmony import */ var _model_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./model.js */ \"(ssr)/./node_modules/skinview3d/libs/model.js\");\n/* harmony import */ var _viewer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./viewer.js */ \"(ssr)/./node_modules/skinview3d/libs/viewer.js\");\n/* harmony import */ var _animation_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./animation.js */ \"(ssr)/./node_modules/skinview3d/libs/animation.js\");\n/* harmony import */ var _nametag_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./nametag.js */ \"(ssr)/./node_modules/skinview3d/libs/nametag.js\");\n\n\n\n\n//# sourceMappingURL=skinview3d.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc2tpbnZpZXczZC9saWJzL3NraW52aWV3M2QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJCO0FBQ0M7QUFDRztBQUNGO0FBQzdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9ydGZvbGlvLy4vbm9kZV9tb2R1bGVzL3NraW52aWV3M2QvbGlicy9za2ludmlldzNkLmpzPzBkNjMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vbW9kZWwuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3ZpZXdlci5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vYW5pbWF0aW9uLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9uYW1ldGFnLmpzXCI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1za2ludmlldzNkLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/skinview3d/libs/skinview3d.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/skinview3d/libs/viewer.js":
/*!************************************************!*\
  !*** ./node_modules/skinview3d/libs/viewer.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SkinViewer: () => (/* binding */ SkinViewer)\n/* harmony export */ });\n/* harmony import */ var skinview_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! skinview-utils */ \"(ssr)/./node_modules/skinview-utils/build/index.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_examples_jsm_controls_OrbitControls_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! three/examples/jsm/controls/OrbitControls.js */ \"(ssr)/./node_modules/three/examples/jsm/controls/OrbitControls.js\");\n/* harmony import */ var three_examples_jsm_postprocessing_EffectComposer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! three/examples/jsm/postprocessing/EffectComposer.js */ \"(ssr)/./node_modules/three/examples/jsm/postprocessing/EffectComposer.js\");\n/* harmony import */ var three_examples_jsm_postprocessing_RenderPass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! three/examples/jsm/postprocessing/RenderPass.js */ \"(ssr)/./node_modules/three/examples/jsm/postprocessing/RenderPass.js\");\n/* harmony import */ var three_examples_jsm_postprocessing_ShaderPass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! three/examples/jsm/postprocessing/ShaderPass.js */ \"(ssr)/./node_modules/three/examples/jsm/postprocessing/ShaderPass.js\");\n/* harmony import */ var three_examples_jsm_shaders_FXAAShader_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! three/examples/jsm/shaders/FXAAShader.js */ \"(ssr)/./node_modules/three/examples/jsm/shaders/FXAAShader.js\");\n/* harmony import */ var _animation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./animation.js */ \"(ssr)/./node_modules/skinview3d/libs/animation.js\");\n/* harmony import */ var _model_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./model.js */ \"(ssr)/./node_modules/skinview3d/libs/model.js\");\n/* harmony import */ var _nametag_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./nametag.js */ \"(ssr)/./node_modules/skinview3d/libs/nametag.js\");\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The SkinViewer renders the player on a canvas.\n */\nclass SkinViewer {\n    constructor(options = {}) {\n        /**\n         * The canvas where the renderer draws its output.\n         */\n        Object.defineProperty(this, \"canvas\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"scene\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"camera\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"renderer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * The OrbitControls component which is used to implement the mouse control function.\n         *\n         * @see {@link https://threejs.org/docs/#examples/en/controls/OrbitControls | OrbitControls - three.js docs}\n         */\n        Object.defineProperty(this, \"controls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * The player object.\n         */\n        Object.defineProperty(this, \"playerObject\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * A group that wraps the player object.\n         * It is used to center the player in the world.\n         */\n        Object.defineProperty(this, \"playerWrapper\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"globalLight\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new three__WEBPACK_IMPORTED_MODULE_4__.AmbientLight(0xffffff, 3)\n        });\n        Object.defineProperty(this, \"cameraLight\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new three__WEBPACK_IMPORTED_MODULE_4__.PointLight(0xffffff, 0.6)\n        });\n        Object.defineProperty(this, \"composer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"renderPass\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"fxaaPass\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"skinCanvas\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"capeCanvas\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"earsCanvas\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"skinTexture\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"capeTexture\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"earsTexture\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"backgroundTexture\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_disposed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"_renderPaused\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"_zoom\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"isUserRotating\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        /**\n         * Whether to rotate the player along the y axis.\n         *\n         * @defaultValue `false`\n         */\n        Object.defineProperty(this, \"autoRotate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        /**\n         * The angular velocity of the player, in rad/s.\n         *\n         * @defaultValue `1.0`\n         * @see {@link autoRotate}\n         */\n        Object.defineProperty(this, \"autoRotateSpeed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1.0\n        });\n        Object.defineProperty(this, \"_animation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clock\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"animationID\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"onContextLost\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"onContextRestored\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_pixelRatio\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"devicePixelRatioQuery\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"onDevicePixelRatioChange\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_nameTag\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        this.canvas = options.canvas === undefined ? document.createElement(\"canvas\") : options.canvas;\n        this.skinCanvas = document.createElement(\"canvas\");\n        this.capeCanvas = document.createElement(\"canvas\");\n        this.earsCanvas = document.createElement(\"canvas\");\n        this.scene = new three__WEBPACK_IMPORTED_MODULE_4__.Scene();\n        this.camera = new three__WEBPACK_IMPORTED_MODULE_4__.PerspectiveCamera();\n        this.camera.add(this.cameraLight);\n        this.scene.add(this.camera);\n        this.scene.add(this.globalLight);\n        three__WEBPACK_IMPORTED_MODULE_4__.ColorManagement.enabled = false;\n        this.renderer = new three__WEBPACK_IMPORTED_MODULE_4__.WebGLRenderer({\n            canvas: this.canvas,\n            preserveDrawingBuffer: options.preserveDrawingBuffer === true, // default: false\n        });\n        this.onDevicePixelRatioChange = () => {\n            this.renderer.setPixelRatio(window.devicePixelRatio);\n            this.updateComposerSize();\n            if (this._pixelRatio === \"match-device\") {\n                this.devicePixelRatioQuery = matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);\n                this.devicePixelRatioQuery.addEventListener(\"change\", this.onDevicePixelRatioChange, { once: true });\n            }\n        };\n        if (options.pixelRatio === undefined || options.pixelRatio === \"match-device\") {\n            this._pixelRatio = \"match-device\";\n            this.devicePixelRatioQuery = matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);\n            this.devicePixelRatioQuery.addEventListener(\"change\", this.onDevicePixelRatioChange, { once: true });\n            this.renderer.setPixelRatio(window.devicePixelRatio);\n        }\n        else {\n            this._pixelRatio = options.pixelRatio;\n            this.devicePixelRatioQuery = null;\n            this.renderer.setPixelRatio(options.pixelRatio);\n        }\n        this.renderer.setClearColor(0, 0);\n        let renderTarget;\n        if (this.renderer.capabilities.isWebGL2) {\n            // Use float precision depth if possible\n            // see https://github.com/bs-community/skinview3d/issues/111\n            renderTarget = new three__WEBPACK_IMPORTED_MODULE_4__.WebGLRenderTarget(0, 0, {\n                depthTexture: new three__WEBPACK_IMPORTED_MODULE_4__.DepthTexture(0, 0, three__WEBPACK_IMPORTED_MODULE_4__.FloatType),\n            });\n        }\n        this.composer = new three_examples_jsm_postprocessing_EffectComposer_js__WEBPACK_IMPORTED_MODULE_5__.EffectComposer(this.renderer, renderTarget);\n        this.renderPass = new three_examples_jsm_postprocessing_RenderPass_js__WEBPACK_IMPORTED_MODULE_6__.RenderPass(this.scene, this.camera);\n        this.fxaaPass = new three_examples_jsm_postprocessing_ShaderPass_js__WEBPACK_IMPORTED_MODULE_7__.ShaderPass(three_examples_jsm_shaders_FXAAShader_js__WEBPACK_IMPORTED_MODULE_8__.FXAAShader);\n        this.composer.addPass(this.renderPass);\n        this.composer.addPass(this.fxaaPass);\n        this.playerObject = new _model_js__WEBPACK_IMPORTED_MODULE_2__.PlayerObject();\n        this.playerObject.name = \"player\";\n        this.playerObject.skin.visible = false;\n        this.playerObject.cape.visible = false;\n        this.playerWrapper = new three__WEBPACK_IMPORTED_MODULE_4__.Group();\n        this.playerWrapper.add(this.playerObject);\n        this.scene.add(this.playerWrapper);\n        this.controls = new three_examples_jsm_controls_OrbitControls_js__WEBPACK_IMPORTED_MODULE_9__.OrbitControls(this.camera, this.canvas);\n        this.controls.enablePan = false; // disable pan by default\n        this.controls.minDistance = 10;\n        this.controls.maxDistance = 256;\n        if (options.enableControls === false) {\n            this.controls.enabled = false;\n        }\n        if (options.skin !== undefined) {\n            this.loadSkin(options.skin, {\n                model: options.model,\n                ears: options.ears === \"current-skin\",\n            });\n        }\n        if (options.cape !== undefined) {\n            this.loadCape(options.cape);\n        }\n        if (options.ears !== undefined && options.ears !== \"current-skin\") {\n            this.loadEars(options.ears.source, {\n                textureType: options.ears.textureType,\n            });\n        }\n        if (options.width !== undefined) {\n            this.width = options.width;\n        }\n        if (options.height !== undefined) {\n            this.height = options.height;\n        }\n        if (options.background !== undefined) {\n            this.background = options.background;\n        }\n        if (options.panorama !== undefined) {\n            this.loadPanorama(options.panorama);\n        }\n        if (options.nameTag !== undefined) {\n            this.nameTag = options.nameTag;\n        }\n        this.camera.position.z = 1;\n        this._zoom = options.zoom === undefined ? 0.9 : options.zoom;\n        this.fov = options.fov === undefined ? 50 : options.fov;\n        this._animation = options.animation === undefined ? null : options.animation;\n        this.clock = new three__WEBPACK_IMPORTED_MODULE_4__.Clock();\n        if (options.renderPaused === true) {\n            this._renderPaused = true;\n            this.animationID = null;\n        }\n        else {\n            this.animationID = window.requestAnimationFrame(() => this.draw());\n        }\n        this.onContextLost = (event) => {\n            event.preventDefault();\n            if (this.animationID !== null) {\n                window.cancelAnimationFrame(this.animationID);\n                this.animationID = null;\n            }\n        };\n        this.onContextRestored = () => {\n            this.renderer.setClearColor(0, 0); // Clear color might be lost\n            if (!this._renderPaused && !this._disposed && this.animationID === null) {\n                this.animationID = window.requestAnimationFrame(() => this.draw());\n            }\n        };\n        this.canvas.addEventListener(\"webglcontextlost\", this.onContextLost, false);\n        this.canvas.addEventListener(\"webglcontextrestored\", this.onContextRestored, false);\n        this.canvas.addEventListener(\"mousedown\", () => {\n            this.isUserRotating = true;\n        }, false);\n        this.canvas.addEventListener(\"mouseup\", () => {\n            this.isUserRotating = false;\n        }, false);\n        this.canvas.addEventListener(\"touchmove\", e => {\n            if (e.touches.length === 1) {\n                this.isUserRotating = true;\n            }\n            else {\n                this.isUserRotating = false;\n            }\n        }, false);\n        this.canvas.addEventListener(\"touchend\", () => {\n            this.isUserRotating = false;\n        }, false);\n    }\n    updateComposerSize() {\n        this.composer.setSize(this.width, this.height);\n        const pixelRatio = this.renderer.getPixelRatio();\n        this.composer.setPixelRatio(pixelRatio);\n        this.fxaaPass.material.uniforms[\"resolution\"].value.x = 1 / (this.width * pixelRatio);\n        this.fxaaPass.material.uniforms[\"resolution\"].value.y = 1 / (this.height * pixelRatio);\n    }\n    recreateSkinTexture() {\n        if (this.skinTexture !== null) {\n            this.skinTexture.dispose();\n        }\n        this.skinTexture = new three__WEBPACK_IMPORTED_MODULE_4__.CanvasTexture(this.skinCanvas);\n        this.skinTexture.magFilter = three__WEBPACK_IMPORTED_MODULE_4__.NearestFilter;\n        this.skinTexture.minFilter = three__WEBPACK_IMPORTED_MODULE_4__.NearestFilter;\n        this.playerObject.skin.map = this.skinTexture;\n    }\n    recreateCapeTexture() {\n        if (this.capeTexture !== null) {\n            this.capeTexture.dispose();\n        }\n        this.capeTexture = new three__WEBPACK_IMPORTED_MODULE_4__.CanvasTexture(this.capeCanvas);\n        this.capeTexture.magFilter = three__WEBPACK_IMPORTED_MODULE_4__.NearestFilter;\n        this.capeTexture.minFilter = three__WEBPACK_IMPORTED_MODULE_4__.NearestFilter;\n        this.playerObject.cape.map = this.capeTexture;\n        this.playerObject.elytra.map = this.capeTexture;\n    }\n    recreateEarsTexture() {\n        if (this.earsTexture !== null) {\n            this.earsTexture.dispose();\n        }\n        this.earsTexture = new three__WEBPACK_IMPORTED_MODULE_4__.CanvasTexture(this.earsCanvas);\n        this.earsTexture.magFilter = three__WEBPACK_IMPORTED_MODULE_4__.NearestFilter;\n        this.earsTexture.minFilter = three__WEBPACK_IMPORTED_MODULE_4__.NearestFilter;\n        this.playerObject.ears.map = this.earsTexture;\n    }\n    loadSkin(source, options = {}) {\n        if (source === null) {\n            this.resetSkin();\n        }\n        else if ((0,skinview_utils__WEBPACK_IMPORTED_MODULE_0__.isTextureSource)(source)) {\n            (0,skinview_utils__WEBPACK_IMPORTED_MODULE_0__.loadSkinToCanvas)(this.skinCanvas, source);\n            this.recreateSkinTexture();\n            if (options.model === undefined || options.model === \"auto-detect\") {\n                this.playerObject.skin.modelType = (0,skinview_utils__WEBPACK_IMPORTED_MODULE_0__.inferModelType)(this.skinCanvas);\n            }\n            else {\n                this.playerObject.skin.modelType = options.model;\n            }\n            if (options.makeVisible !== false) {\n                this.playerObject.skin.visible = true;\n            }\n            if (options.ears === true || options.ears == \"load-only\") {\n                (0,skinview_utils__WEBPACK_IMPORTED_MODULE_0__.loadEarsToCanvasFromSkin)(this.earsCanvas, source);\n                this.recreateEarsTexture();\n                if (options.ears === true) {\n                    this.playerObject.ears.visible = true;\n                }\n            }\n        }\n        else {\n            return (0,skinview_utils__WEBPACK_IMPORTED_MODULE_0__.loadImage)(source).then(image => this.loadSkin(image, options));\n        }\n    }\n    resetSkin() {\n        this.playerObject.skin.visible = false;\n        this.playerObject.skin.map = null;\n        if (this.skinTexture !== null) {\n            this.skinTexture.dispose();\n            this.skinTexture = null;\n        }\n    }\n    loadCape(source, options = {}) {\n        if (source === null) {\n            this.resetCape();\n        }\n        else if ((0,skinview_utils__WEBPACK_IMPORTED_MODULE_0__.isTextureSource)(source)) {\n            (0,skinview_utils__WEBPACK_IMPORTED_MODULE_0__.loadCapeToCanvas)(this.capeCanvas, source);\n            this.recreateCapeTexture();\n            if (options.makeVisible !== false) {\n                this.playerObject.backEquipment = options.backEquipment === undefined ? \"cape\" : options.backEquipment;\n            }\n        }\n        else {\n            return (0,skinview_utils__WEBPACK_IMPORTED_MODULE_0__.loadImage)(source).then(image => this.loadCape(image, options));\n        }\n    }\n    resetCape() {\n        this.playerObject.backEquipment = null;\n        this.playerObject.cape.map = null;\n        this.playerObject.elytra.map = null;\n        if (this.capeTexture !== null) {\n            this.capeTexture.dispose();\n            this.capeTexture = null;\n        }\n    }\n    loadEars(source, options = {}) {\n        if (source === null) {\n            this.resetEars();\n        }\n        else if ((0,skinview_utils__WEBPACK_IMPORTED_MODULE_0__.isTextureSource)(source)) {\n            if (options.textureType === \"skin\") {\n                (0,skinview_utils__WEBPACK_IMPORTED_MODULE_0__.loadEarsToCanvasFromSkin)(this.earsCanvas, source);\n            }\n            else {\n                (0,skinview_utils__WEBPACK_IMPORTED_MODULE_0__.loadEarsToCanvas)(this.earsCanvas, source);\n            }\n            this.recreateEarsTexture();\n            if (options.makeVisible !== false) {\n                this.playerObject.ears.visible = true;\n            }\n        }\n        else {\n            return (0,skinview_utils__WEBPACK_IMPORTED_MODULE_0__.loadImage)(source).then(image => this.loadEars(image, options));\n        }\n    }\n    resetEars() {\n        this.playerObject.ears.visible = false;\n        this.playerObject.ears.map = null;\n        if (this.earsTexture !== null) {\n            this.earsTexture.dispose();\n            this.earsTexture = null;\n        }\n    }\n    loadPanorama(source) {\n        return this.loadBackground(source, three__WEBPACK_IMPORTED_MODULE_4__.EquirectangularReflectionMapping);\n    }\n    loadBackground(source, mapping) {\n        if ((0,skinview_utils__WEBPACK_IMPORTED_MODULE_0__.isTextureSource)(source)) {\n            if (this.backgroundTexture !== null) {\n                this.backgroundTexture.dispose();\n            }\n            this.backgroundTexture = new three__WEBPACK_IMPORTED_MODULE_4__.Texture();\n            this.backgroundTexture.image = source;\n            if (mapping !== undefined) {\n                this.backgroundTexture.mapping = mapping;\n            }\n            this.backgroundTexture.needsUpdate = true;\n            this.scene.background = this.backgroundTexture;\n        }\n        else {\n            return (0,skinview_utils__WEBPACK_IMPORTED_MODULE_0__.loadImage)(source).then(image => this.loadBackground(image, mapping));\n        }\n    }\n    draw() {\n        const dt = this.clock.getDelta();\n        if (this._animation !== null) {\n            this._animation.update(this.playerObject, dt);\n        }\n        if (this.autoRotate) {\n            if (!(this.controls.enableRotate && this.isUserRotating)) {\n                this.playerWrapper.rotation.y += dt * this.autoRotateSpeed;\n            }\n        }\n        this.controls.update();\n        this.render();\n        this.animationID = window.requestAnimationFrame(() => this.draw());\n    }\n    /**\n     * Renders the scene to the canvas.\n     * This method does not change the animation progress.\n     */\n    render() {\n        this.composer.render();\n    }\n    setSize(width, height) {\n        this.camera.aspect = width / height;\n        this.camera.updateProjectionMatrix();\n        this.renderer.setSize(width, height);\n        this.updateComposerSize();\n    }\n    dispose() {\n        this._disposed = true;\n        this.canvas.removeEventListener(\"webglcontextlost\", this.onContextLost, false);\n        this.canvas.removeEventListener(\"webglcontextrestored\", this.onContextRestored, false);\n        if (this.devicePixelRatioQuery !== null) {\n            this.devicePixelRatioQuery.removeEventListener(\"change\", this.onDevicePixelRatioChange);\n            this.devicePixelRatioQuery = null;\n        }\n        if (this.animationID !== null) {\n            window.cancelAnimationFrame(this.animationID);\n            this.animationID = null;\n        }\n        this.controls.dispose();\n        this.renderer.dispose();\n        this.resetSkin();\n        this.resetCape();\n        this.resetEars();\n        this.background = null;\n        this.fxaaPass.fsQuad.dispose();\n    }\n    get disposed() {\n        return this._disposed;\n    }\n    /**\n     * Whether rendering and animations are paused.\n     * Setting this property to true will stop both rendering and animation loops.\n     * Setting it back to false will resume them.\n     */\n    get renderPaused() {\n        return this._renderPaused;\n    }\n    set renderPaused(value) {\n        this._renderPaused = value;\n        if (this._renderPaused && this.animationID !== null) {\n            window.cancelAnimationFrame(this.animationID);\n            this.animationID = null;\n            this.clock.stop();\n            this.clock.autoStart = true;\n        }\n        else if (!this._renderPaused &&\n            !this._disposed &&\n            !this.renderer.getContext().isContextLost() &&\n            this.animationID == null) {\n            this.animationID = window.requestAnimationFrame(() => this.draw());\n        }\n    }\n    get width() {\n        return this.renderer.getSize(new three__WEBPACK_IMPORTED_MODULE_4__.Vector2()).width;\n    }\n    set width(newWidth) {\n        this.setSize(newWidth, this.height);\n    }\n    get height() {\n        return this.renderer.getSize(new three__WEBPACK_IMPORTED_MODULE_4__.Vector2()).height;\n    }\n    set height(newHeight) {\n        this.setSize(this.width, newHeight);\n    }\n    get background() {\n        return this.scene.background;\n    }\n    set background(value) {\n        if (value === null || value instanceof three__WEBPACK_IMPORTED_MODULE_4__.Color || value instanceof three__WEBPACK_IMPORTED_MODULE_4__.Texture) {\n            this.scene.background = value;\n        }\n        else {\n            this.scene.background = new three__WEBPACK_IMPORTED_MODULE_4__.Color(value);\n        }\n        if (this.backgroundTexture !== null && value !== this.backgroundTexture) {\n            this.backgroundTexture.dispose();\n            this.backgroundTexture = null;\n        }\n    }\n    adjustCameraDistance() {\n        let distance = 4.5 + 16.5 / Math.tan(((this.fov / 180) * Math.PI) / 2) / this.zoom;\n        // limit distance between 10 ~ 256 (default min / max distance of OrbitControls)\n        if (distance < 10) {\n            distance = 10;\n        }\n        else if (distance > 256) {\n            distance = 256;\n        }\n        this.camera.position.multiplyScalar(distance / this.camera.position.length());\n        this.camera.updateProjectionMatrix();\n    }\n    resetCameraPose() {\n        this.camera.position.set(0, 0, 1);\n        this.camera.rotation.set(0, 0, 0);\n        this.adjustCameraDistance();\n    }\n    get fov() {\n        return this.camera.fov;\n    }\n    set fov(value) {\n        this.camera.fov = value;\n        this.adjustCameraDistance();\n    }\n    get zoom() {\n        return this._zoom;\n    }\n    set zoom(value) {\n        this._zoom = value;\n        this.adjustCameraDistance();\n    }\n    get pixelRatio() {\n        return this._pixelRatio;\n    }\n    set pixelRatio(newValue) {\n        if (newValue === \"match-device\") {\n            if (this._pixelRatio !== \"match-device\") {\n                this._pixelRatio = newValue;\n                this.onDevicePixelRatioChange();\n            }\n        }\n        else {\n            if (this._pixelRatio === \"match-device\" && this.devicePixelRatioQuery !== null) {\n                this.devicePixelRatioQuery.removeEventListener(\"change\", this.onDevicePixelRatioChange);\n                this.devicePixelRatioQuery = null;\n            }\n            this._pixelRatio = newValue;\n            this.renderer.setPixelRatio(newValue);\n            this.updateComposerSize();\n        }\n    }\n    /**\n     * The animation that is current playing, or `null` if no animation is playing.\n     *\n     * Setting this property to a different value will change the current animation.\n     * The player's pose and the progress of the new animation will be reset before playing.\n     *\n     * Setting this property to `null` will stop the current animation and reset the player's pose.\n     */\n    get animation() {\n        return this._animation;\n    }\n    set animation(animation) {\n        if (this._animation !== animation) {\n            this.playerObject.resetJoints();\n            this.playerObject.position.set(0, 0, 0);\n            this.playerObject.rotation.set(0, 0, 0);\n            this.clock.stop();\n            this.clock.autoStart = true;\n        }\n        if (animation !== null) {\n            animation.progress = 0;\n        }\n        this._animation = animation;\n    }\n    /**\n     * The name tag to display above the player, or `null` if there is none.\n     *\n     * When setting this property to a `string` value, a {@link NameTagObject}\n     * will be automatically created with default options.\n     *\n     * @example\n     * ```\n     * skinViewer.nameTag = \"hello\";\n     * skinViewer.nameTag = new NameTagObject(\"hello\", { textStyle: \"yellow\" });\n     * skinViewer.nameTag = null;\n     * ```\n     */\n    get nameTag() {\n        return this._nameTag;\n    }\n    set nameTag(newVal) {\n        if (this._nameTag !== null) {\n            // Remove the old name tag from the scene\n            this.playerWrapper.remove(this._nameTag);\n        }\n        if (newVal !== null) {\n            if (!(newVal instanceof three__WEBPACK_IMPORTED_MODULE_4__.Object3D)) {\n                newVal = new _nametag_js__WEBPACK_IMPORTED_MODULE_3__.NameTagObject(newVal);\n            }\n            // Add the new name tag to the scene\n            this.playerWrapper.add(newVal);\n            // Set y position\n            newVal.position.y = 20;\n        }\n        this._nameTag = newVal;\n    }\n}\n//# sourceMappingURL=viewer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc2tpbnZpZXczZC9saWJzL3ZpZXdlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUE2SjtBQUM0RztBQUM1TDtBQUNRO0FBQ1Y7QUFDRTtBQUNBO0FBQ1A7QUFDckI7QUFDUDtBQUNHO0FBQzdDO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBWTtBQUNuQyxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkNBQVU7QUFDakMsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsd0NBQUs7QUFDOUIsMEJBQTBCLG9EQUFpQjtBQUMzQztBQUNBO0FBQ0E7QUFDQSxRQUFRLGtEQUFlO0FBQ3ZCLDRCQUE0QixnREFBYTtBQUN6QztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFLHdCQUF3QjtBQUNoRyx1R0FBdUcsWUFBWTtBQUNuSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSx3QkFBd0I7QUFDNUYsbUdBQW1HLFlBQVk7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG9EQUFpQjtBQUNoRCxrQ0FBa0MsK0NBQVksT0FBTyw0Q0FBUztBQUM5RCxhQUFhO0FBQ2I7QUFDQSw0QkFBNEIsK0ZBQWM7QUFDMUMsOEJBQThCLHVGQUFVO0FBQ3hDLDRCQUE0Qix1RkFBVSxDQUFDLGdGQUFVO0FBQ2pEO0FBQ0E7QUFDQSxnQ0FBZ0MsbURBQVk7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHdDQUFLO0FBQ3RDO0FBQ0E7QUFDQSw0QkFBNEIsdUZBQWE7QUFDekMseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHdDQUFLO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsZ0RBQWE7QUFDNUMscUNBQXFDLGdEQUFhO0FBQ2xELHFDQUFxQyxnREFBYTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsZ0RBQWE7QUFDNUMscUNBQXFDLGdEQUFhO0FBQ2xELHFDQUFxQyxnREFBYTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixnREFBYTtBQUM1QyxxQ0FBcUMsZ0RBQWE7QUFDbEQscUNBQXFDLGdEQUFhO0FBQ2xEO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtEQUFlO0FBQ2hDLFlBQVksZ0VBQWdCO0FBQzVCO0FBQ0E7QUFDQSxtREFBbUQsOERBQWM7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix3RUFBd0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIseURBQVM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtEQUFlO0FBQ2hDLFlBQVksZ0VBQWdCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix5REFBUztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwrREFBZTtBQUNoQztBQUNBLGdCQUFnQix3RUFBd0I7QUFDeEM7QUFDQTtBQUNBLGdCQUFnQixnRUFBZ0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIseURBQVM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxtRUFBZ0M7QUFDM0U7QUFDQTtBQUNBLFlBQVksK0RBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDBDQUFPO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIseURBQVM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsMENBQU87QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QywwQ0FBTztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLHdDQUFLLHFCQUFxQiwwQ0FBTztBQUNoRjtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msd0NBQUs7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQscUJBQXFCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywyQ0FBUTtBQUM1Qyw2QkFBNkIsc0RBQWE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb3J0Zm9saW8vLi9ub2RlX21vZHVsZXMvc2tpbnZpZXczZC9saWJzL3ZpZXdlci5qcz84NTM0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluZmVyTW9kZWxUeXBlLCBpc1RleHR1cmVTb3VyY2UsIGxvYWRDYXBlVG9DYW52YXMsIGxvYWRFYXJzVG9DYW52YXMsIGxvYWRFYXJzVG9DYW52YXNGcm9tU2tpbiwgbG9hZEltYWdlLCBsb2FkU2tpblRvQ2FudmFzLCB9IGZyb20gXCJza2ludmlldy11dGlsc1wiO1xuaW1wb3J0IHsgQ29sb3IsIFBvaW50TGlnaHQsIEVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nLCBHcm91cCwgTmVhcmVzdEZpbHRlciwgUGVyc3BlY3RpdmVDYW1lcmEsIFNjZW5lLCBUZXh0dXJlLCBWZWN0b3IyLCBXZWJHTFJlbmRlcmVyLCBBbWJpZW50TGlnaHQsIENhbnZhc1RleHR1cmUsIFdlYkdMUmVuZGVyVGFyZ2V0LCBGbG9hdFR5cGUsIERlcHRoVGV4dHVyZSwgQ2xvY2ssIE9iamVjdDNELCBDb2xvck1hbmFnZW1lbnQsIH0gZnJvbSBcInRocmVlXCI7XG5pbXBvcnQgeyBPcmJpdENvbnRyb2xzIH0gZnJvbSBcInRocmVlL2V4YW1wbGVzL2pzbS9jb250cm9scy9PcmJpdENvbnRyb2xzLmpzXCI7XG5pbXBvcnQgeyBFZmZlY3RDb21wb3NlciB9IGZyb20gXCJ0aHJlZS9leGFtcGxlcy9qc20vcG9zdHByb2Nlc3NpbmcvRWZmZWN0Q29tcG9zZXIuanNcIjtcbmltcG9ydCB7IEZ1bGxTY3JlZW5RdWFkIH0gZnJvbSBcInRocmVlL2V4YW1wbGVzL2pzbS9wb3N0cHJvY2Vzc2luZy9QYXNzLmpzXCI7XG5pbXBvcnQgeyBSZW5kZXJQYXNzIH0gZnJvbSBcInRocmVlL2V4YW1wbGVzL2pzbS9wb3N0cHJvY2Vzc2luZy9SZW5kZXJQYXNzLmpzXCI7XG5pbXBvcnQgeyBTaGFkZXJQYXNzIH0gZnJvbSBcInRocmVlL2V4YW1wbGVzL2pzbS9wb3N0cHJvY2Vzc2luZy9TaGFkZXJQYXNzLmpzXCI7XG5pbXBvcnQgeyBGWEFBU2hhZGVyIH0gZnJvbSBcInRocmVlL2V4YW1wbGVzL2pzbS9zaGFkZXJzL0ZYQUFTaGFkZXIuanNcIjtcbmltcG9ydCB7IFBsYXllckFuaW1hdGlvbiB9IGZyb20gXCIuL2FuaW1hdGlvbi5qc1wiO1xuaW1wb3J0IHsgUGxheWVyT2JqZWN0IH0gZnJvbSBcIi4vbW9kZWwuanNcIjtcbmltcG9ydCB7IE5hbWVUYWdPYmplY3QgfSBmcm9tIFwiLi9uYW1ldGFnLmpzXCI7XG4vKipcbiAqIFRoZSBTa2luVmlld2VyIHJlbmRlcnMgdGhlIHBsYXllciBvbiBhIGNhbnZhcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFNraW5WaWV3ZXIge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNhbnZhcyB3aGVyZSB0aGUgcmVuZGVyZXIgZHJhd3MgaXRzIG91dHB1dC5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhbnZhc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzY2VuZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYW1lcmFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVuZGVyZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBPcmJpdENvbnRyb2xzIGNvbXBvbmVudCB3aGljaCBpcyB1c2VkIHRvIGltcGxlbWVudCB0aGUgbW91c2UgY29udHJvbCBmdW5jdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHNlZSB7QGxpbmsgaHR0cHM6Ly90aHJlZWpzLm9yZy9kb2NzLyNleGFtcGxlcy9lbi9jb250cm9scy9PcmJpdENvbnRyb2xzIHwgT3JiaXRDb250cm9scyAtIHRocmVlLmpzIGRvY3N9XG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb250cm9sc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHBsYXllciBvYmplY3QuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwbGF5ZXJPYmplY3RcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZ3JvdXAgdGhhdCB3cmFwcyB0aGUgcGxheWVyIG9iamVjdC5cbiAgICAgICAgICogSXQgaXMgdXNlZCB0byBjZW50ZXIgdGhlIHBsYXllciBpbiB0aGUgd29ybGQuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwbGF5ZXJXcmFwcGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdsb2JhbExpZ2h0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgQW1iaWVudExpZ2h0KDB4ZmZmZmZmLCAzKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FtZXJhTGlnaHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBQb2ludExpZ2h0KDB4ZmZmZmZmLCAwLjYpXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb21wb3NlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZW5kZXJQYXNzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZ4YWFQYXNzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNraW5DYW52YXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FwZUNhbnZhc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJlYXJzQ2FudmFzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNraW5UZXh0dXJlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBudWxsXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYXBlVGV4dHVyZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZWFyc1RleHR1cmVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJhY2tncm91bmRUZXh0dXJlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBudWxsXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfZGlzcG9zZWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfcmVuZGVyUGF1c2VkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3pvb21cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaXNVc2VyUm90YXRpbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0byByb3RhdGUgdGhlIHBsYXllciBhbG9uZyB0aGUgeSBheGlzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVmYXVsdFZhbHVlIGBmYWxzZWBcbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF1dG9Sb3RhdGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIHBsYXllciwgaW4gcmFkL3MuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZWZhdWx0VmFsdWUgYDEuMGBcbiAgICAgICAgICogQHNlZSB7QGxpbmsgYXV0b1JvdGF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF1dG9Sb3RhdGVTcGVlZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMS4wXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfYW5pbWF0aW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNsb2NrXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFuaW1hdGlvbklEXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uQ29udGV4dExvc3RcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib25Db250ZXh0UmVzdG9yZWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3BpeGVsUmF0aW9cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZGV2aWNlUGl4ZWxSYXRpb1F1ZXJ5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfbmFtZVRhZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBvcHRpb25zLmNhbnZhcyA9PT0gdW5kZWZpbmVkID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSA6IG9wdGlvbnMuY2FudmFzO1xuICAgICAgICB0aGlzLnNraW5DYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICB0aGlzLmNhcGVDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICB0aGlzLmVhcnNDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICB0aGlzLnNjZW5lID0gbmV3IFNjZW5lKCk7XG4gICAgICAgIHRoaXMuY2FtZXJhID0gbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKCk7XG4gICAgICAgIHRoaXMuY2FtZXJhLmFkZCh0aGlzLmNhbWVyYUxpZ2h0KTtcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQodGhpcy5jYW1lcmEpO1xuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLmdsb2JhbExpZ2h0KTtcbiAgICAgICAgQ29sb3JNYW5hZ2VtZW50LmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBXZWJHTFJlbmRlcmVyKHtcbiAgICAgICAgICAgIGNhbnZhczogdGhpcy5jYW52YXMsXG4gICAgICAgICAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IG9wdGlvbnMucHJlc2VydmVEcmF3aW5nQnVmZmVyID09PSB0cnVlLCAvLyBkZWZhdWx0OiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDb21wb3NlclNpemUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9waXhlbFJhdGlvID09PSBcIm1hdGNoLWRldmljZVwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXZpY2VQaXhlbFJhdGlvUXVlcnkgPSBtYXRjaE1lZGlhKGAocmVzb2x1dGlvbjogJHt3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb31kcHB4KWApO1xuICAgICAgICAgICAgICAgIHRoaXMuZGV2aWNlUGl4ZWxSYXRpb1F1ZXJ5LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcy5vbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG9wdGlvbnMucGl4ZWxSYXRpbyA9PT0gdW5kZWZpbmVkIHx8IG9wdGlvbnMucGl4ZWxSYXRpbyA9PT0gXCJtYXRjaC1kZXZpY2VcIikge1xuICAgICAgICAgICAgdGhpcy5fcGl4ZWxSYXRpbyA9IFwibWF0Y2gtZGV2aWNlXCI7XG4gICAgICAgICAgICB0aGlzLmRldmljZVBpeGVsUmF0aW9RdWVyeSA9IG1hdGNoTWVkaWEoYChyZXNvbHV0aW9uOiAke3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfWRwcHgpYCk7XG4gICAgICAgICAgICB0aGlzLmRldmljZVBpeGVsUmF0aW9RdWVyeS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHRoaXMub25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcGl4ZWxSYXRpbyA9IG9wdGlvbnMucGl4ZWxSYXRpbztcbiAgICAgICAgICAgIHRoaXMuZGV2aWNlUGl4ZWxSYXRpb1F1ZXJ5ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyhvcHRpb25zLnBpeGVsUmF0aW8pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0Q2xlYXJDb2xvcigwLCAwKTtcbiAgICAgICAgbGV0IHJlbmRlclRhcmdldDtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZXIuY2FwYWJpbGl0aWVzLmlzV2ViR0wyKSB7XG4gICAgICAgICAgICAvLyBVc2UgZmxvYXQgcHJlY2lzaW9uIGRlcHRoIGlmIHBvc3NpYmxlXG4gICAgICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JzLWNvbW11bml0eS9za2ludmlldzNkL2lzc3Vlcy8xMTFcbiAgICAgICAgICAgIHJlbmRlclRhcmdldCA9IG5ldyBXZWJHTFJlbmRlclRhcmdldCgwLCAwLCB7XG4gICAgICAgICAgICAgICAgZGVwdGhUZXh0dXJlOiBuZXcgRGVwdGhUZXh0dXJlKDAsIDAsIEZsb2F0VHlwZSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbXBvc2VyID0gbmV3IEVmZmVjdENvbXBvc2VyKHRoaXMucmVuZGVyZXIsIHJlbmRlclRhcmdldCk7XG4gICAgICAgIHRoaXMucmVuZGVyUGFzcyA9IG5ldyBSZW5kZXJQYXNzKHRoaXMuc2NlbmUsIHRoaXMuY2FtZXJhKTtcbiAgICAgICAgdGhpcy5meGFhUGFzcyA9IG5ldyBTaGFkZXJQYXNzKEZYQUFTaGFkZXIpO1xuICAgICAgICB0aGlzLmNvbXBvc2VyLmFkZFBhc3ModGhpcy5yZW5kZXJQYXNzKTtcbiAgICAgICAgdGhpcy5jb21wb3Nlci5hZGRQYXNzKHRoaXMuZnhhYVBhc3MpO1xuICAgICAgICB0aGlzLnBsYXllck9iamVjdCA9IG5ldyBQbGF5ZXJPYmplY3QoKTtcbiAgICAgICAgdGhpcy5wbGF5ZXJPYmplY3QubmFtZSA9IFwicGxheWVyXCI7XG4gICAgICAgIHRoaXMucGxheWVyT2JqZWN0LnNraW4udmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBsYXllck9iamVjdC5jYXBlLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wbGF5ZXJXcmFwcGVyID0gbmV3IEdyb3VwKCk7XG4gICAgICAgIHRoaXMucGxheWVyV3JhcHBlci5hZGQodGhpcy5wbGF5ZXJPYmplY3QpO1xuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLnBsYXllcldyYXBwZXIpO1xuICAgICAgICB0aGlzLmNvbnRyb2xzID0gbmV3IE9yYml0Q29udHJvbHModGhpcy5jYW1lcmEsIHRoaXMuY2FudmFzKTtcbiAgICAgICAgdGhpcy5jb250cm9scy5lbmFibGVQYW4gPSBmYWxzZTsgLy8gZGlzYWJsZSBwYW4gYnkgZGVmYXVsdFxuICAgICAgICB0aGlzLmNvbnRyb2xzLm1pbkRpc3RhbmNlID0gMTA7XG4gICAgICAgIHRoaXMuY29udHJvbHMubWF4RGlzdGFuY2UgPSAyNTY7XG4gICAgICAgIGlmIChvcHRpb25zLmVuYWJsZUNvbnRyb2xzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5jb250cm9scy5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc2tpbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRTa2luKG9wdGlvbnMuc2tpbiwge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBvcHRpb25zLm1vZGVsLFxuICAgICAgICAgICAgICAgIGVhcnM6IG9wdGlvbnMuZWFycyA9PT0gXCJjdXJyZW50LXNraW5cIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmNhcGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5sb2FkQ2FwZShvcHRpb25zLmNhcGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmVhcnMgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmVhcnMgIT09IFwiY3VycmVudC1za2luXCIpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZEVhcnMob3B0aW9ucy5lYXJzLnNvdXJjZSwge1xuICAgICAgICAgICAgICAgIHRleHR1cmVUeXBlOiBvcHRpb25zLmVhcnMudGV4dHVyZVR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy53aWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLndpZHRoID0gb3B0aW9ucy53aWR0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5oZWlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBvcHRpb25zLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5iYWNrZ3JvdW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IG9wdGlvbnMuYmFja2dyb3VuZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5wYW5vcmFtYSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRQYW5vcmFtYShvcHRpb25zLnBhbm9yYW1hKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5uYW1lVGFnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZVRhZyA9IG9wdGlvbnMubmFtZVRhZztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi56ID0gMTtcbiAgICAgICAgdGhpcy5fem9vbSA9IG9wdGlvbnMuem9vbSA9PT0gdW5kZWZpbmVkID8gMC45IDogb3B0aW9ucy56b29tO1xuICAgICAgICB0aGlzLmZvdiA9IG9wdGlvbnMuZm92ID09PSB1bmRlZmluZWQgPyA1MCA6IG9wdGlvbnMuZm92O1xuICAgICAgICB0aGlzLl9hbmltYXRpb24gPSBvcHRpb25zLmFuaW1hdGlvbiA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG9wdGlvbnMuYW5pbWF0aW9uO1xuICAgICAgICB0aGlzLmNsb2NrID0gbmV3IENsb2NrKCk7XG4gICAgICAgIGlmIChvcHRpb25zLnJlbmRlclBhdXNlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyUGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uSUQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25JRCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5kcmF3KCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25Db250ZXh0TG9zdCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFuaW1hdGlvbklEICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uSUQpO1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uSUQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uQ29udGV4dFJlc3RvcmVkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRDbGVhckNvbG9yKDAsIDApOyAvLyBDbGVhciBjb2xvciBtaWdodCBiZSBsb3N0XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3JlbmRlclBhdXNlZCAmJiAhdGhpcy5fZGlzcG9zZWQgJiYgdGhpcy5hbmltYXRpb25JRCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uSUQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuZHJhdygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dGxvc3RcIiwgdGhpcy5vbkNvbnRleHRMb3N0LCBmYWxzZSk7XG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJnbGNvbnRleHRyZXN0b3JlZFwiLCB0aGlzLm9uQ29udGV4dFJlc3RvcmVkLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc1VzZXJSb3RhdGluZyA9IHRydWU7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc1VzZXJSb3RhdGluZyA9IGZhbHNlO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgZSA9PiB7XG4gICAgICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNVc2VyUm90YXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1VzZXJSb3RhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzVXNlclJvdGF0aW5nID0gZmFsc2U7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICB9XG4gICAgdXBkYXRlQ29tcG9zZXJTaXplKCkge1xuICAgICAgICB0aGlzLmNvbXBvc2VyLnNldFNpemUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICBjb25zdCBwaXhlbFJhdGlvID0gdGhpcy5yZW5kZXJlci5nZXRQaXhlbFJhdGlvKCk7XG4gICAgICAgIHRoaXMuY29tcG9zZXIuc2V0UGl4ZWxSYXRpbyhwaXhlbFJhdGlvKTtcbiAgICAgICAgdGhpcy5meGFhUGFzcy5tYXRlcmlhbC51bmlmb3Jtc1tcInJlc29sdXRpb25cIl0udmFsdWUueCA9IDEgLyAodGhpcy53aWR0aCAqIHBpeGVsUmF0aW8pO1xuICAgICAgICB0aGlzLmZ4YWFQYXNzLm1hdGVyaWFsLnVuaWZvcm1zW1wicmVzb2x1dGlvblwiXS52YWx1ZS55ID0gMSAvICh0aGlzLmhlaWdodCAqIHBpeGVsUmF0aW8pO1xuICAgIH1cbiAgICByZWNyZWF0ZVNraW5UZXh0dXJlKCkge1xuICAgICAgICBpZiAodGhpcy5za2luVGV4dHVyZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5za2luVGV4dHVyZS5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5za2luVGV4dHVyZSA9IG5ldyBDYW52YXNUZXh0dXJlKHRoaXMuc2tpbkNhbnZhcyk7XG4gICAgICAgIHRoaXMuc2tpblRleHR1cmUubWFnRmlsdGVyID0gTmVhcmVzdEZpbHRlcjtcbiAgICAgICAgdGhpcy5za2luVGV4dHVyZS5taW5GaWx0ZXIgPSBOZWFyZXN0RmlsdGVyO1xuICAgICAgICB0aGlzLnBsYXllck9iamVjdC5za2luLm1hcCA9IHRoaXMuc2tpblRleHR1cmU7XG4gICAgfVxuICAgIHJlY3JlYXRlQ2FwZVRleHR1cmUoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhcGVUZXh0dXJlICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmNhcGVUZXh0dXJlLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhcGVUZXh0dXJlID0gbmV3IENhbnZhc1RleHR1cmUodGhpcy5jYXBlQ2FudmFzKTtcbiAgICAgICAgdGhpcy5jYXBlVGV4dHVyZS5tYWdGaWx0ZXIgPSBOZWFyZXN0RmlsdGVyO1xuICAgICAgICB0aGlzLmNhcGVUZXh0dXJlLm1pbkZpbHRlciA9IE5lYXJlc3RGaWx0ZXI7XG4gICAgICAgIHRoaXMucGxheWVyT2JqZWN0LmNhcGUubWFwID0gdGhpcy5jYXBlVGV4dHVyZTtcbiAgICAgICAgdGhpcy5wbGF5ZXJPYmplY3QuZWx5dHJhLm1hcCA9IHRoaXMuY2FwZVRleHR1cmU7XG4gICAgfVxuICAgIHJlY3JlYXRlRWFyc1RleHR1cmUoKSB7XG4gICAgICAgIGlmICh0aGlzLmVhcnNUZXh0dXJlICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmVhcnNUZXh0dXJlLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVhcnNUZXh0dXJlID0gbmV3IENhbnZhc1RleHR1cmUodGhpcy5lYXJzQ2FudmFzKTtcbiAgICAgICAgdGhpcy5lYXJzVGV4dHVyZS5tYWdGaWx0ZXIgPSBOZWFyZXN0RmlsdGVyO1xuICAgICAgICB0aGlzLmVhcnNUZXh0dXJlLm1pbkZpbHRlciA9IE5lYXJlc3RGaWx0ZXI7XG4gICAgICAgIHRoaXMucGxheWVyT2JqZWN0LmVhcnMubWFwID0gdGhpcy5lYXJzVGV4dHVyZTtcbiAgICB9XG4gICAgbG9hZFNraW4oc291cmNlLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHNvdXJjZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldFNraW4oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1RleHR1cmVTb3VyY2Uoc291cmNlKSkge1xuICAgICAgICAgICAgbG9hZFNraW5Ub0NhbnZhcyh0aGlzLnNraW5DYW52YXMsIHNvdXJjZSk7XG4gICAgICAgICAgICB0aGlzLnJlY3JlYXRlU2tpblRleHR1cmUoKTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm1vZGVsID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5tb2RlbCA9PT0gXCJhdXRvLWRldGVjdFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJPYmplY3Quc2tpbi5tb2RlbFR5cGUgPSBpbmZlck1vZGVsVHlwZSh0aGlzLnNraW5DYW52YXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJPYmplY3Quc2tpbi5tb2RlbFR5cGUgPSBvcHRpb25zLm1vZGVsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubWFrZVZpc2libGUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJPYmplY3Quc2tpbi52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmVhcnMgPT09IHRydWUgfHwgb3B0aW9ucy5lYXJzID09IFwibG9hZC1vbmx5XCIpIHtcbiAgICAgICAgICAgICAgICBsb2FkRWFyc1RvQ2FudmFzRnJvbVNraW4odGhpcy5lYXJzQ2FudmFzLCBzb3VyY2UpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVjcmVhdGVFYXJzVGV4dHVyZSgpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVhcnMgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJPYmplY3QuZWFycy52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbG9hZEltYWdlKHNvdXJjZSkudGhlbihpbWFnZSA9PiB0aGlzLmxvYWRTa2luKGltYWdlLCBvcHRpb25zKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzZXRTa2luKCkge1xuICAgICAgICB0aGlzLnBsYXllck9iamVjdC5za2luLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wbGF5ZXJPYmplY3Quc2tpbi5tYXAgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5za2luVGV4dHVyZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5za2luVGV4dHVyZS5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLnNraW5UZXh0dXJlID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2FkQ2FwZShzb3VyY2UsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAoc291cmNlID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0Q2FwZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzVGV4dHVyZVNvdXJjZShzb3VyY2UpKSB7XG4gICAgICAgICAgICBsb2FkQ2FwZVRvQ2FudmFzKHRoaXMuY2FwZUNhbnZhcywgc291cmNlKTtcbiAgICAgICAgICAgIHRoaXMucmVjcmVhdGVDYXBlVGV4dHVyZSgpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMubWFrZVZpc2libGUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJPYmplY3QuYmFja0VxdWlwbWVudCA9IG9wdGlvbnMuYmFja0VxdWlwbWVudCA9PT0gdW5kZWZpbmVkID8gXCJjYXBlXCIgOiBvcHRpb25zLmJhY2tFcXVpcG1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbG9hZEltYWdlKHNvdXJjZSkudGhlbihpbWFnZSA9PiB0aGlzLmxvYWRDYXBlKGltYWdlLCBvcHRpb25zKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzZXRDYXBlKCkge1xuICAgICAgICB0aGlzLnBsYXllck9iamVjdC5iYWNrRXF1aXBtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wbGF5ZXJPYmplY3QuY2FwZS5tYXAgPSBudWxsO1xuICAgICAgICB0aGlzLnBsYXllck9iamVjdC5lbHl0cmEubWFwID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuY2FwZVRleHR1cmUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuY2FwZVRleHR1cmUuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5jYXBlVGV4dHVyZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbG9hZEVhcnMoc291cmNlLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHNvdXJjZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldEVhcnMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1RleHR1cmVTb3VyY2Uoc291cmNlKSkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMudGV4dHVyZVR5cGUgPT09IFwic2tpblwiKSB7XG4gICAgICAgICAgICAgICAgbG9hZEVhcnNUb0NhbnZhc0Zyb21Ta2luKHRoaXMuZWFyc0NhbnZhcywgc291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvYWRFYXJzVG9DYW52YXModGhpcy5lYXJzQ2FudmFzLCBzb3VyY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWNyZWF0ZUVhcnNUZXh0dXJlKCk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5tYWtlVmlzaWJsZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllck9iamVjdC5lYXJzLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGxvYWRJbWFnZShzb3VyY2UpLnRoZW4oaW1hZ2UgPT4gdGhpcy5sb2FkRWFycyhpbWFnZSwgb3B0aW9ucykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc2V0RWFycygpIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJPYmplY3QuZWFycy52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGxheWVyT2JqZWN0LmVhcnMubWFwID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuZWFyc1RleHR1cmUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZWFyc1RleHR1cmUuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5lYXJzVGV4dHVyZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbG9hZFBhbm9yYW1hKHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkQmFja2dyb3VuZChzb3VyY2UsIEVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nKTtcbiAgICB9XG4gICAgbG9hZEJhY2tncm91bmQoc291cmNlLCBtYXBwaW5nKSB7XG4gICAgICAgIGlmIChpc1RleHR1cmVTb3VyY2Uoc291cmNlKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYmFja2dyb3VuZFRleHR1cmUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJhY2tncm91bmRUZXh0dXJlLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZFRleHR1cmUgPSBuZXcgVGV4dHVyZSgpO1xuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kVGV4dHVyZS5pbWFnZSA9IHNvdXJjZTtcbiAgICAgICAgICAgIGlmIChtYXBwaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJhY2tncm91bmRUZXh0dXJlLm1hcHBpbmcgPSBtYXBwaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kVGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLmJhY2tncm91bmQgPSB0aGlzLmJhY2tncm91bmRUZXh0dXJlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGxvYWRJbWFnZShzb3VyY2UpLnRoZW4oaW1hZ2UgPT4gdGhpcy5sb2FkQmFja2dyb3VuZChpbWFnZSwgbWFwcGluZykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRyYXcoKSB7XG4gICAgICAgIGNvbnN0IGR0ID0gdGhpcy5jbG9jay5nZXREZWx0YSgpO1xuICAgICAgICBpZiAodGhpcy5fYW5pbWF0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9hbmltYXRpb24udXBkYXRlKHRoaXMucGxheWVyT2JqZWN0LCBkdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXV0b1JvdGF0ZSkge1xuICAgICAgICAgICAgaWYgKCEodGhpcy5jb250cm9scy5lbmFibGVSb3RhdGUgJiYgdGhpcy5pc1VzZXJSb3RhdGluZykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllcldyYXBwZXIucm90YXRpb24ueSArPSBkdCAqIHRoaXMuYXV0b1JvdGF0ZVNwZWVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udHJvbHMudXBkYXRlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uSUQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuZHJhdygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgc2NlbmUgdG8gdGhlIGNhbnZhcy5cbiAgICAgKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCBjaGFuZ2UgdGhlIGFuaW1hdGlvbiBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHRoaXMuY29tcG9zZXIucmVuZGVyKCk7XG4gICAgfVxuICAgIHNldFNpemUod2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLmNhbWVyYS5hc3BlY3QgPSB3aWR0aCAvIGhlaWdodDtcbiAgICAgICAgdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHRoaXMudXBkYXRlQ29tcG9zZXJTaXplKCk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dGxvc3RcIiwgdGhpcy5vbkNvbnRleHRMb3N0LCBmYWxzZSk7XG4gICAgICAgIHRoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3ZWJnbGNvbnRleHRyZXN0b3JlZFwiLCB0aGlzLm9uQ29udGV4dFJlc3RvcmVkLCBmYWxzZSk7XG4gICAgICAgIGlmICh0aGlzLmRldmljZVBpeGVsUmF0aW9RdWVyeSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5kZXZpY2VQaXhlbFJhdGlvUXVlcnkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB0aGlzLm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSk7XG4gICAgICAgICAgICB0aGlzLmRldmljZVBpeGVsUmF0aW9RdWVyeSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uSUQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbklEKTtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uSUQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udHJvbHMuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5yZXNldFNraW4oKTtcbiAgICAgICAgdGhpcy5yZXNldENhcGUoKTtcbiAgICAgICAgdGhpcy5yZXNldEVhcnMoKTtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kID0gbnVsbDtcbiAgICAgICAgdGhpcy5meGFhUGFzcy5mc1F1YWQuZGlzcG9zZSgpO1xuICAgIH1cbiAgICBnZXQgZGlzcG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNwb3NlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciByZW5kZXJpbmcgYW5kIGFuaW1hdGlvbnMgYXJlIHBhdXNlZC5cbiAgICAgKiBTZXR0aW5nIHRoaXMgcHJvcGVydHkgdG8gdHJ1ZSB3aWxsIHN0b3AgYm90aCByZW5kZXJpbmcgYW5kIGFuaW1hdGlvbiBsb29wcy5cbiAgICAgKiBTZXR0aW5nIGl0IGJhY2sgdG8gZmFsc2Ugd2lsbCByZXN1bWUgdGhlbS5cbiAgICAgKi9cbiAgICBnZXQgcmVuZGVyUGF1c2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyUGF1c2VkO1xuICAgIH1cbiAgICBzZXQgcmVuZGVyUGF1c2VkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlclBhdXNlZCA9IHZhbHVlO1xuICAgICAgICBpZiAodGhpcy5fcmVuZGVyUGF1c2VkICYmIHRoaXMuYW5pbWF0aW9uSUQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbklEKTtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uSUQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jbG9jay5zdG9wKCk7XG4gICAgICAgICAgICB0aGlzLmNsb2NrLmF1dG9TdGFydCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuX3JlbmRlclBhdXNlZCAmJlxuICAgICAgICAgICAgIXRoaXMuX2Rpc3Bvc2VkICYmXG4gICAgICAgICAgICAhdGhpcy5yZW5kZXJlci5nZXRDb250ZXh0KCkuaXNDb250ZXh0TG9zdCgpICYmXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbklEID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uSUQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuZHJhdygpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgd2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLmdldFNpemUobmV3IFZlY3RvcjIoKSkud2lkdGg7XG4gICAgfVxuICAgIHNldCB3aWR0aChuZXdXaWR0aCkge1xuICAgICAgICB0aGlzLnNldFNpemUobmV3V2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICB9XG4gICAgZ2V0IGhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXIuZ2V0U2l6ZShuZXcgVmVjdG9yMigpKS5oZWlnaHQ7XG4gICAgfVxuICAgIHNldCBoZWlnaHQobmV3SGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuc2V0U2l6ZSh0aGlzLndpZHRoLCBuZXdIZWlnaHQpO1xuICAgIH1cbiAgICBnZXQgYmFja2dyb3VuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmUuYmFja2dyb3VuZDtcbiAgICB9XG4gICAgc2V0IGJhY2tncm91bmQodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlIGluc3RhbmNlb2YgQ29sb3IgfHwgdmFsdWUgaW5zdGFuY2VvZiBUZXh0dXJlKSB7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLmJhY2tncm91bmQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuYmFja2dyb3VuZCA9IG5ldyBDb2xvcih2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYmFja2dyb3VuZFRleHR1cmUgIT09IG51bGwgJiYgdmFsdWUgIT09IHRoaXMuYmFja2dyb3VuZFRleHR1cmUpIHtcbiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZFRleHR1cmUuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kVGV4dHVyZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRqdXN0Q2FtZXJhRGlzdGFuY2UoKSB7XG4gICAgICAgIGxldCBkaXN0YW5jZSA9IDQuNSArIDE2LjUgLyBNYXRoLnRhbigoKHRoaXMuZm92IC8gMTgwKSAqIE1hdGguUEkpIC8gMikgLyB0aGlzLnpvb207XG4gICAgICAgIC8vIGxpbWl0IGRpc3RhbmNlIGJldHdlZW4gMTAgfiAyNTYgKGRlZmF1bHQgbWluIC8gbWF4IGRpc3RhbmNlIG9mIE9yYml0Q29udHJvbHMpXG4gICAgICAgIGlmIChkaXN0YW5jZSA8IDEwKSB7XG4gICAgICAgICAgICBkaXN0YW5jZSA9IDEwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpc3RhbmNlID4gMjU2KSB7XG4gICAgICAgICAgICBkaXN0YW5jZSA9IDI1NjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi5tdWx0aXBseVNjYWxhcihkaXN0YW5jZSAvIHRoaXMuY2FtZXJhLnBvc2l0aW9uLmxlbmd0aCgpKTtcbiAgICAgICAgdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgIH1cbiAgICByZXNldENhbWVyYVBvc2UoKSB7XG4gICAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnNldCgwLCAwLCAxKTtcbiAgICAgICAgdGhpcy5jYW1lcmEucm90YXRpb24uc2V0KDAsIDAsIDApO1xuICAgICAgICB0aGlzLmFkanVzdENhbWVyYURpc3RhbmNlKCk7XG4gICAgfVxuICAgIGdldCBmb3YoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbWVyYS5mb3Y7XG4gICAgfVxuICAgIHNldCBmb3YodmFsdWUpIHtcbiAgICAgICAgdGhpcy5jYW1lcmEuZm92ID0gdmFsdWU7XG4gICAgICAgIHRoaXMuYWRqdXN0Q2FtZXJhRGlzdGFuY2UoKTtcbiAgICB9XG4gICAgZ2V0IHpvb20oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl96b29tO1xuICAgIH1cbiAgICBzZXQgem9vbSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl96b29tID0gdmFsdWU7XG4gICAgICAgIHRoaXMuYWRqdXN0Q2FtZXJhRGlzdGFuY2UoKTtcbiAgICB9XG4gICAgZ2V0IHBpeGVsUmF0aW8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9waXhlbFJhdGlvO1xuICAgIH1cbiAgICBzZXQgcGl4ZWxSYXRpbyhuZXdWYWx1ZSkge1xuICAgICAgICBpZiAobmV3VmFsdWUgPT09IFwibWF0Y2gtZGV2aWNlXCIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9waXhlbFJhdGlvICE9PSBcIm1hdGNoLWRldmljZVwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGl4ZWxSYXRpbyA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMub25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcGl4ZWxSYXRpbyA9PT0gXCJtYXRjaC1kZXZpY2VcIiAmJiB0aGlzLmRldmljZVBpeGVsUmF0aW9RdWVyeSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGV2aWNlUGl4ZWxSYXRpb1F1ZXJ5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcy5vbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGV2aWNlUGl4ZWxSYXRpb1F1ZXJ5ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3BpeGVsUmF0aW8gPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyhuZXdWYWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbXBvc2VyU2l6ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBhbmltYXRpb24gdGhhdCBpcyBjdXJyZW50IHBsYXlpbmcsIG9yIGBudWxsYCBpZiBubyBhbmltYXRpb24gaXMgcGxheWluZy5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgdGhpcyBwcm9wZXJ0eSB0byBhIGRpZmZlcmVudCB2YWx1ZSB3aWxsIGNoYW5nZSB0aGUgY3VycmVudCBhbmltYXRpb24uXG4gICAgICogVGhlIHBsYXllcidzIHBvc2UgYW5kIHRoZSBwcm9ncmVzcyBvZiB0aGUgbmV3IGFuaW1hdGlvbiB3aWxsIGJlIHJlc2V0IGJlZm9yZSBwbGF5aW5nLlxuICAgICAqXG4gICAgICogU2V0dGluZyB0aGlzIHByb3BlcnR5IHRvIGBudWxsYCB3aWxsIHN0b3AgdGhlIGN1cnJlbnQgYW5pbWF0aW9uIGFuZCByZXNldCB0aGUgcGxheWVyJ3MgcG9zZS5cbiAgICAgKi9cbiAgICBnZXQgYW5pbWF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYW5pbWF0aW9uO1xuICAgIH1cbiAgICBzZXQgYW5pbWF0aW9uKGFuaW1hdGlvbikge1xuICAgICAgICBpZiAodGhpcy5fYW5pbWF0aW9uICE9PSBhbmltYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyT2JqZWN0LnJlc2V0Sm9pbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnBsYXllck9iamVjdC5wb3NpdGlvbi5zZXQoMCwgMCwgMCk7XG4gICAgICAgICAgICB0aGlzLnBsYXllck9iamVjdC5yb3RhdGlvbi5zZXQoMCwgMCwgMCk7XG4gICAgICAgICAgICB0aGlzLmNsb2NrLnN0b3AoKTtcbiAgICAgICAgICAgIHRoaXMuY2xvY2suYXV0b1N0YXJ0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW5pbWF0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBhbmltYXRpb24ucHJvZ3Jlc3MgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbiA9IGFuaW1hdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgdGFnIHRvIGRpc3BsYXkgYWJvdmUgdGhlIHBsYXllciwgb3IgYG51bGxgIGlmIHRoZXJlIGlzIG5vbmUuXG4gICAgICpcbiAgICAgKiBXaGVuIHNldHRpbmcgdGhpcyBwcm9wZXJ0eSB0byBhIGBzdHJpbmdgIHZhbHVlLCBhIHtAbGluayBOYW1lVGFnT2JqZWN0fVxuICAgICAqIHdpbGwgYmUgYXV0b21hdGljYWxseSBjcmVhdGVkIHdpdGggZGVmYXVsdCBvcHRpb25zLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBza2luVmlld2VyLm5hbWVUYWcgPSBcImhlbGxvXCI7XG4gICAgICogc2tpblZpZXdlci5uYW1lVGFnID0gbmV3IE5hbWVUYWdPYmplY3QoXCJoZWxsb1wiLCB7IHRleHRTdHlsZTogXCJ5ZWxsb3dcIiB9KTtcbiAgICAgKiBza2luVmlld2VyLm5hbWVUYWcgPSBudWxsO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBuYW1lVGFnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZVRhZztcbiAgICB9XG4gICAgc2V0IG5hbWVUYWcobmV3VmFsKSB7XG4gICAgICAgIGlmICh0aGlzLl9uYW1lVGFnICE9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIG9sZCBuYW1lIHRhZyBmcm9tIHRoZSBzY2VuZVxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJXcmFwcGVyLnJlbW92ZSh0aGlzLl9uYW1lVGFnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3VmFsICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIShuZXdWYWwgaW5zdGFuY2VvZiBPYmplY3QzRCkpIHtcbiAgICAgICAgICAgICAgICBuZXdWYWwgPSBuZXcgTmFtZVRhZ09iamVjdChuZXdWYWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWRkIHRoZSBuZXcgbmFtZSB0YWcgdG8gdGhlIHNjZW5lXG4gICAgICAgICAgICB0aGlzLnBsYXllcldyYXBwZXIuYWRkKG5ld1ZhbCk7XG4gICAgICAgICAgICAvLyBTZXQgeSBwb3NpdGlvblxuICAgICAgICAgICAgbmV3VmFsLnBvc2l0aW9uLnkgPSAyMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9uYW1lVGFnID0gbmV3VmFsO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZpZXdlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/skinview3d/libs/viewer.js\n");

/***/ })

};
;